(()=>{"use strict";class e{constructor(e){this.elemModal=null,this.eventShowModal=null,this.eventHideModal=null,this.hiding=!1,this.destroyed=!1,this.animationSpeed=200,this.options=e||{},this.createModal(),this.elemModal.addEventListener("click",this.handlerCloseModal.bind(this)),this.eventShowModal=new CustomEvent("show.modalFunc",{detail:this.elemModal}),this.eventHideModal=new CustomEvent("hide.modalFunc",{detail:this.elemModal})}createModal(){this.elemModal=document.createElement("div");let e,t="";if(this.elemModal.classList.add("modalFunc"),e='<div class="modal__backdrop" data-dismiss="modalFunc"><div class="modal__content"><div class="modal__header"><div class="modal__title" data-modalFunc="title">{{title}}</div><span class="modal__btn-close" data-dismiss="modalFunc" title="Закрыть">×</span></div><div class="modal__body" data-modalFunc="content">{{content}}</div>{{footer}}</div></div>'.replace("{{title}}",this.options.title||"Новое окно"),e=e.replace("{{content}}",this.options.content||""),this.options.footerButtons){for(const e of this.options.footerButtons){let a='<button type="button" class="{{button_class}}" data-handler={{button_handler}}>{{button_text}}</button>'.replace("{{button_class}}",e.class);a=a.replace("{{button_handler}}",e.handler),a=a.replace("{{button_text}}",e.text),t+=a}t='<div class="modal__footer">{{buttons}}</div>'.replace("{{buttons}}",t)}e=e.replace("{{footer}}",t),this.elemModal.innerHTML=e,document.body.appendChild(this.elemModal)}show(){this.destroyed||this.hiding||(this.elemModal.classList.add("modal__show"),document.dispatchEvent(this.eventShowModal))}hide(){this.hiding=!0,this.elemModal.classList.remove("modal__show"),this.elemModal.classList.add("modal__hiding"),setTimeout((()=>{this.elemModal.classList.remove("modal__hiding"),this.hiding=!1}),this.animationSpeed),document.dispatchEvent(this.eventHideModal)}handlerCloseModal(e){("modalFunc"===e.target.dataset.dismiss||e.target.dataset.handler)&&this.hide()}destroy(){this.elemModal.parentElement&&this.elemModal.parentElement.removeChild(this.elemModal),this.elemModal.removeEventListener("click",this.handlerCloseModal.bind(this))}setContent(e){this.elemModal.querySelector('[data-modalFunc="content"]').innerHTML=e}setTitle(e){this.elemModal.querySelector('[data-modalFunc="title"]').innerHTML=e}}function t(e,t){if(e<t-1&&e>0)return"top";if(e<t**2-1&&e>t**2-t)return"bottom";for(let a=1;a<t-1;a+=1){if(e===t*a)return"left";if(e===t*a+(t-1))return"right"}switch(e){case 0:return"top-left";case t-1:return"top-right";case t*(t-1):return"bottom-left";case t**2-1:return"bottom-right";default:return"center"}}function a(e,t){return e.map(t)}function s(e,t){return Math.floor(Math.max(e,e*(80+t)/100))}function i(e,t){return Object.assign(e,t),e}const l={prairie:"prairie",desert:"desert",arctic:"arctic",mountain:"mountain"};class n{constructor(e){this.levelGame=1,this.gamePlay=e,this.isMove="user",this.countClick=0,this.userTeamSurvivors=[],this.history=[],this.points=0,this.block=!1,this.userTeam=[],this.compTeam=[],this.activeChar=null,this.indexSelect=null,this.transitionCells=[],this.attackCells=[],this.showModal=!1}getAllPlayer(){if(!this.userTeam||!this.compTeam)throw new Error("it must have 2 arguments");return[...this.userTeam,...this.compTeam]}calculateSumPoints(){return this.userTeam.reduce(((e,t)=>e+t.character.health),0)}getUserPosition(){const e=this.userTeam.find((e=>this.attackCells.includes(e.position)));return e?e.position:void 0}findPresumedDeceasedPlayer(){return this.getAllPlayer().find((e=>e.position===this.activeCharUser?.position))}getPresumedDeceasedPlayerInfo(e){return{index:("comp"===this.isMove?this.userTeam:this.compTeam).findIndex((t=>e===t.position)),teamKey:"comp"===this.isMove?"userTeam":"compTeam"}}getPlayer(e){return this.getAllPlayer().find((t=>t.position===e))}}const o="auto",h="pointer",r="crosshair",c="not-allowed";function d(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=[];for(let e=0;e<t**2;e+=1)i.push(e);const l=function(e,t){const a=[];for(let s=0,i=t;s<e.length;s+=t,i+=t)a.push(e.slice(s,i));return a}(i,t);return s?function(e,t,a){const s=[];let i,l;for(let a=0;a<e.length&&(l=a,i=e[a].findIndex((e=>e===t)),-1===i);a+=1);for(let n=-a;n<=a;n+=1)for(let o=-a;o<=a;o+=1)l+n>=0&&i+o>=0&&l+n<e.length&&i+o<e.length&&e[l+n][i+o]!==t&&s.push(e[l+n][i+o]);return s}(l,e,a):function(e,t,a){const s=[];let i,l;for(let a=0;a<e.length&&(l=a,i=e[a].findIndex((e=>e===t)),-1===i);a+=1);for(let t=1;t<=a;t+=1)i-t>=0&&s.push(e[l][i-t]),i+t<e.length&&s.push(e[l][i+t]),l+t<e.length&&i-t>=0&&s.push(e[l+t][i-t]),l+t<e.length&&i+t<e.length&&s.push(e[l+t][i+t]),l-t>=0&&i-t>=0&&s.push(e[l-t][i-t]),l-t>=0&&i+t<e.length&&s.push(e[l-t][i+t]),l-t>=0&&s.push(e[l-t][i]),l+t<e.length&&s.push(e[l+t][i]);return s}(l,e,a)}class m{constructor(e){this.characters=e}}class u{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"generic";if("Character"===new.target.name)throw new Error("Invalid class");this.type=t,this.level=e,this.attack=0,this.defence=0,this.health=50}levelUp(){if(this.health<=0)throw new Error("Can't level up a dead character");this.level=Math.min(this.level+1,4),this.attack=s(this.attack,this.health),this.defence=s(this.defence,this.health),this.health=Math.min(this.health+80,100)}}class g{constructor(e,t){this.character=e,this.position=t}set character(e){if(!(e instanceof u))throw new Error("character must be instance of Character or its children");this._character=e}get character(){return this._character}set position(e){if("number"!=typeof e)throw new Error("position must be a number");this._position=e}get position(){return this._position}}class S extends u{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),this.type="bowman",this.attack=25,this.defence=25,this.maxRange=2,this.maxAttack=2}}class v extends u{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),this.type="swordsman",this.attack=40,this.defence=10,this.maxRange=4,this.maxAttack=1}}class p extends u{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),this.type="magician",this.attack=10,this.defence=40,this.maxRange=1,this.maxAttack=4}}class C extends u{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),this.type="daemon",this.attack=10,this.defence=10,this.maxRange=1,this.maxAttack=4}}class f extends u{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),this.type="undead",this.attack=40,this.defence=10,this.maxRange=4,this.maxAttack=1}}class y extends u{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),this.type="vampire",this.attack=25,this.defence=25,this.maxRange=2,this.maxAttack=2}}function w(e){const t=[];if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])for(let a=e-2;a<e**2;a+=e)t.push(a),t.push(a+1);else for(let a=0;a<e**2;a+=8)t.push(a),t.push(a+1);return t}function M(e){const t=w(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]);return t[Math.floor(Math.random()*t.length)]}function P(e,t,a,s){let[i,l]=s;const n=[];i>=4&&(i=4),l>=10&&(l=10);const o=function(e,t,a){const s=[],i=function*(e,t){for(;;){const a=Math.floor(Math.random()*t+1),s=e[Math.floor(Math.random()*e.length)];yield new s(a)}}(e,t);for(let e=0;e<a;e+=1)s.push(i.next().value);return new m(s)}(e,i,l),h=[];return o.characters.forEach((e=>{let s,i=!1;do{s=M(t,a),h.find((e=>e===s))?s=M(t,a):(h.push(s),i=!0)}while(!i);n.push(new g(e,s))})),n}function k(e){if(!e)return null;const t=new({bowman:S,swordsman:v,magician:p,daemon:C,undead:f,vampire:y}[e._character.type]||null)(e._character.level),a=new g(t,e._position);return t.attack=e._character.attack,t.health=e._character.health,t.defence=e._character.defence,a}const b=new class{constructor(){this.boardSize=8,this.container=null,this.boardEl=null,this.cells=[],this.cellClickListeners=[],this.cellEnterListeners=[],this.cellLeaveListeners=[],this.newGameListeners=[],this.saveGameListeners=[],this.loadGameListeners=[],this.isModal=!1,this.initModalListener()}bindToDOM(e){if(!(e instanceof HTMLElement))throw new Error("container is not HTMLElement");this.container=e}initModalListener(){document.addEventListener("click",(e=>{"modalHandlerCancel"===e.target.dataset.handler&&this.currentModal&&(this.currentModal.hide(),this.isModal=!1)}))}drawUi(e){this.checkBinding(),this.container.innerHTML='\n      <div class="controls">\n        <button data-id="action-restart" class="btn">New Game</button>\n        <button data-id="action-save" class="btn">Save Game</button>\n        <button data-id="action-load" class="btn">Load Game</button>\n      </div>\n      <div class="board-container">\n        <div data-id="board" class="board"></div>\n      </div>\n    ',this.newGameEl=this.container.querySelector("[data-id=action-restart]"),this.saveGameEl=this.container.querySelector("[data-id=action-save]"),this.loadGameEl=this.container.querySelector("[data-id=action-load]"),this.newGameEl.addEventListener("click",(e=>this.onNewGameClick(e))),this.saveGameEl.addEventListener("click",(e=>this.onSaveGameClick(e))),this.loadGameEl.addEventListener("click",(e=>this.onLoadGameClick(e))),this.boardEl=this.container.querySelector("[data-id=board]"),this.boardEl.classList.add(e);for(let e=0;e<this.boardSize**2;e+=1){const a=document.createElement("div");a.classList.add("cell","map-tile",`map-tile-${t(e,this.boardSize)}`),a.addEventListener("mouseenter",(e=>this.onCellEnter(e))),a.addEventListener("mouseleave",(e=>this.onCellLeave(e))),a.addEventListener("click",(e=>this.onCellClick(e))),this.boardEl.appendChild(a)}this.cells=Array.from(this.boardEl.children)}redrawPositions(e){for(const e of this.cells)e.innerHTML="";for(const a of e){const e=this.boardEl.children[a.position],s=document.createElement("div");s.classList.add("character",a.character.type);const i=document.createElement("div");i.classList.add("health-level");const l=document.createElement("div");l.classList.add("health-level-indicator","health-level-indicator-"+((t=a.character.health)<15?"critical":t<50?"normal":"high")),l.style.width=`${a.character.health}%`,i.appendChild(l),s.appendChild(i),e.appendChild(s)}var t}showModal(t,a){const s=new e({title:t,content:`&#${a}`,footerButtons:[{class:"btn btn__cancel",text:"Close",handler:"modalHandlerCancel"}]});this.currentModal=s,s.show()}addCellEnterListener(e){this.cellEnterListeners.push(e)}addCellLeaveListener(e){this.cellLeaveListeners.push(e)}addCellClickListener(e){this.cellClickListeners.push(e)}addNewGameListener(e){this.newGameListeners.push(e)}addSaveGameListener(e){this.saveGameListeners.push(e)}addLoadGameListener(e){this.loadGameListeners.push(e)}onCellEnter(e){const t=this.cells.indexOf(e.currentTarget);this.cellEnterListeners.forEach((e=>e.call(null,t)))}onCellLeave(e){const t=this.cells.indexOf(e.currentTarget);this.cellLeaveListeners.forEach((e=>e.call(null,t)))}onCellClick(e){const t=this.cells.indexOf(e.currentTarget);this.cellClickListeners.forEach((e=>e.call(null,t)))}onNewGameClick(){this.newGameListeners.forEach((e=>e.call(null)))}onSaveGameClick(){this.saveGameListeners.forEach((e=>e.call(null)))}onLoadGameClick(){this.loadGameListeners.forEach((e=>e.call(null)))}showModalMessage(e,t){this.isModal||(this.isModal=!0,this.showModal(e,t))}selectCell(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yellow";this.deselectCell(e),this.cells[e].classList.add("selected",`selected-${t}`)}deselectCell(e){const t=this.cells[e];t&&t.classList.remove(...Array.from(t.classList).filter((e=>e.startsWith("selected"))))}showCellTooltip(e,t){this.cells[t].title=e}hideCellTooltip(e){this.cells[e].title=""}showDamage(e,t){return new Promise((a=>{const s=this.cells[e],i=document.createElement("span");i.className="damage",i.textContent=t,s.appendChild(i),i.addEventListener("animationend",(()=>{s.removeChild(i),a(!0)}))}))}setCursor(e){this.boardEl.style.cursor=e}checkBinding(){if(null===this.container)throw new Error("GamePlay not bind to DOM")}};b.bindToDOM(document.querySelector("#game-container"));const L=new class{constructor(e){this.storage=e}save(e){this.storage.setItem("state",JSON.stringify(e))}load(){try{return JSON.parse(this.storage.getItem("state"))}catch(e){throw new Error("Invalid state")}}}(localStorage),T=new class{constructor(e,t){this.gamePlay=e,this.stateService=t,this.gameState=new n(this.gamePlay),this.onCellClick=this.onCellClick.bind(this),this.onCellEnter=this.onCellEnter.bind(this),this.onCellLeave=this.onCellLeave.bind(this),this.newGame=this.newGame.bind(this),this.saveGame=this.saveGame.bind(this),this.loadGame=this.loadGame.bind(this),this.events()}init(){this.initNewTeams(),this.updatePicture()}events(){this.gamePlay.addCellEnterListener(this.onCellEnter),this.gamePlay.addCellLeaveListener(this.onCellLeave),this.gamePlay.addCellClickListener(this.onCellClick),this.gamePlay.addNewGameListener(this.newGame),this.gamePlay.addSaveGameListener(this.saveGame),this.gamePlay.addLoadGameListener(this.loadGame)}newGame(){const e={levelGame:1,countClick:0,history:[...this.gameState.history,{levelGame:this.gameState.levelGame,points:this.gameState.points}],isMove:"user",block:!1,points:0};i(this.gameState,e),this.reset(),this.init()}saveGame(){this.gameState.attackCells=[],this.gameState.transitionCells=[],this.gameState.activeCharUser=null,this.stateService.save(this.gameState),this.gamePlay.showModalMessage("Your game has saved!","9997")}loadGame(){try{const e=this.stateService.load();this.restoreGameState(e),this.restoreActiveCharacter(e.activeChar),this.updatePicture(),this.showGameInfo()}catch(e){this.handleLoadingError()}}restoreGameState(e){const{levelGame:t,countClick:a,history:s,isMove:l,block:n,points:o,indexSelect:h}=e;i(this.gameState,{levelGame:n?t-1:t,countClick:a,history:s,isMove:l,block:n,points:o,indexSelect:h}),this.resetTeams(e)}restoreActiveCharacter(e){const t=k(e);t&&"user"===t.isMove&&this.reactOnClick(t,["bowman","swordsman","magician"])}handleLoadingError(){this.gamePlay.showModalMessage("There's no game in memory","128075"),this.newGame()}initNewTeams(){this.gameState.userTeam=this.getUserTeam([this.gameState.levelGame,this.gameState.levelGame]),this.gameState.compTeam=this.getCompTeam([this.gameState.levelGame,this.gameState.levelGame])}getUserTeam(e){let[t,a]=e;const s=P([S,v,p],this.gamePlay.boardSize,!1,[t,a]);return this.gameState.userTeam=s,s}getCompTeam(e){let[t,a]=e;const s=P([y,C,f],this.gamePlay.boardSize,!0,[t,a]);return this.gameState.compTeam=s,s}resetTeams(e){this.gameState.userTeam=a(e.userTeam,k),this.gameState.compTeam=a(e.compTeam,k)}levelUp(){const e=Object.values(l);this.updateTeams(),this.gameState.getAllPlayer().forEach((e=>e.character.levelUp())),this.gamePlay.drawUi(e[(this.gameState.levelGame-1)%e.length]),this.gameState.countClick=0,this.gameState.indexSelect=null}updateTeams(){const e=this.getUserTeam([this.gameState.levelGame-1,this.gameState.levelGame]),t=w(this.gamePlay.boardSize);e.forEach((e=>{t.splice(t.indexOf(e.position),1)})),this.gameState.userTeamSurvivors.forEach((e=>{if(!t.includes(e.position)){const a=t[Math.floor(Math.random()*t.length)];e.position=a}})),this.gameState.userTeam=this.gameState.userTeamSurvivors.concat(e),this.gameState.userTeamSurvivors=[],this.gameState.compTeam=this.getCompTeam([this.gameState.levelGame-1,this.gameState.userTeam.length])}showGameInfo(){const e=this.gameState.points?`Your level ${this.gameState.levelGame} and points ${this.gameState.points}`:"There's no points. \n It's the first round",t=this.gameState.points?"128076":"128083";this.gamePlay.showModalMessage(e,t)}async onCellClick(e){if(this.gameState.block)return;const t=this.gameState.getAllPlayer().find((t=>t.position===e));this.gameState.activeChar&&await this.handleUserTurn(e),this.reactOnClick(t,["bowman","swordsman","magician"]),this.gameState.countClick>=1&&await this.handleComputerTurn()}async handleUserTurn(e){this.gameState.indexSelect&&(this.gameState.indexSelect.green===e&&(this.gameState.activeChar.position=e,this.gameState.countClick+=1,this.gamePlay.redrawPositions(this.gameState.getAllPlayer())),this.gameState.indexSelect.red===e)&&(this.gameState.isMove="user",await this.doDamage(e)&&(this.gameState.countClick+=1,this.gamePlay.redrawPositions(this.gameState.getAllPlayer()),await this.checkGameProgress()))}async checkGameProgress(){0===this.gameState.compTeam.length&&(this.gameState.levelGame+=1,this.gameState.points+=this.gameState.calculateSumPoints(),this.reset(),this.gameState.userTeamSurvivors=this.gameState.userTeam,this.gamePlay.showModalMessage(`Level up! Your level ${this.gameState.levelGame} and total points are ${this.gameState.points}`,"9996"),this.levelUp(),this.gamePlay.redrawPositions(this.gameState.getAllPlayer()))}async handleComputerTurn(){this.gameState.activeCharUser=this.gameState.activeChar,this.gameState.isMove="comp",await this.doAttackComp(this)&&(this.gameState.countClick=0,this.gameState.isMove="user",this.gameState.findPresumedDeceasedPlayer()&&(this.gameState.activeChar=this.gameState.activeCharUser,this.reactOnClick(this.gameState.activeChar,["bowman","swordsman","magician"]),this.gamePlay.redrawPositions(this.gameState.getAllPlayer())))}onCellEnter(e){if(this.gameState.block)return;const t=this.gameState.getPlayer(e);if(t&&this.gamePlay.showCellTooltip(function(e){return`🎖${e.level} ⚔${e.attack} 🛡${e.defence} ❤${e.health}`}(t.character),e),!this.gameState.activeChar)return;const a=this.gameState.transitionCells.includes(e),s=this.gameState.attackCells.includes(e),i=this.gameState.userTeam.some((t=>t.position===e)),l=this.gameState.compTeam.some((t=>t.position===e));this.gamePlay.setCursor(h),this.gameState.indexSelect&&(!a||i||l||(this.gameState.indexSelect.green=e,this.gamePlay.selectCell(e,"green")),s&&l&&(this.gameState.indexSelect.red=e,this.gamePlay.selectCell(e,"red"),this.gamePlay.setCursor(r)))}onCellLeave(e){if(this.gamePlay.hideCellTooltip(e),this.gameState.block)return;const t=document.querySelector(".selected-green"),a=this.gameState.attackCells?.includes(e),s=this.gameState.compTeam.some((t=>t.position===e));t&&(this.gamePlay.deselectCell(this.gameState.indexSelect.green),!a&&s&&(this.gamePlay.deselectCell(this.gameState.indexSelect.green),this.gamePlay.setCursor(c))),document.querySelector(".selected-red")&&this.gamePlay.deselectCell(this.gameState.indexSelect.red)}reactOnClick(e,t){if(e)if(t.includes(e.character.type)){this.updateSelectedCell(e.position),this.gamePlay.selectCell(e.position),this.gameState.activeChar=e;const{maxRange:t,maxAttack:a}=e.character;this.gameState.transitionCells=d(e.position,this.gamePlay.boardSize,t),this.gameState.attackCells=d(e.position,this.gamePlay.boardSize,a,!0)}else this.handleInvalidSelection(e.position)}updateSelectedCell(e){this.gameState.indexSelect&&document.querySelector(".selected-yellow")&&this.gamePlay.deselectCell(this.gameState.indexSelect.yellow),this.gameState.indexSelect={yellow:e}}handleInvalidSelection(e){const t=this.gameState.indexSelect,a=!this.gameState.attackCells.includes(e),s=this.gameState.compTeam.some((t=>t.position===e));t&&a&&s?this.gamePlay.showModalMessage("It can't be done","9940"):this.gameState.activeChar||this.gamePlay.showModalMessage("This isn`t your character","9995")}async doDamage(e){const{attack:t}=this.gameState.activeChar.character,a=this.gameState.getPlayer(e),{defence:s,health:i}=a.character,l=function(e,t){return Math.round(Math.max(e-t,.3*e))}(t,s);return!!await this.gamePlay.showDamage(e,l)&&(a.character.health=i-l,this.checkHealthRemoveDead(a),!0)}checkHealthRemoveDead(e){if(e.character.health<=0){const t=this.gameState.getPresumedDeceasedPlayerInfo(e.position);-1!==t.index&&(this.gameState[t.teamKey].splice(t.index,1),this.gameState.indexSelect=null)}}reset(){this.gameState.indexSelect&&(Object.keys(this.gameState.indexSelect).forEach((e=>{this.gamePlay.deselectCell(this.gameState.indexSelect[e])})),this.gameState.indexSelect=null,this.gamePlay.setCursor(o))}updatePicture(){const e=this.gameState.levelGame>0?this.gameState.levelGame-1:0;this.gamePlay.drawUi(Object.values(l)[e]),this.gamePlay.redrawPositions(this.gameState.getAllPlayer()),this.gameState.indexSelect&&this.gameState.indexSelect.yellow&&this.gamePlay.selectCell(this.gameState.indexSelect.yellow)}async doAttackComp(){const e=(t=this.gameState.compTeam)[Math.floor(Math.random()*t.length)];var t;this.gameState.activeChar=e,this.reactOnClick(e,["daemon","undead","vampire"]);const a=this.gameState.getUserPosition();return void 0!==a?await this.doDamage(a)&&(this.checkAndEndGameIfNecessary(),this.updatePicture()):(this.gameState.activeChar.position=this.moveToRandomPosition(),this.gamePlay.redrawPositions(this.gameState.getAllPlayer())),this.gameState.activeChar=null,this.reset(),!0}checkAndEndGameIfNecessary(){0===this.gameState.userTeam.length&&(this.gameState.block=!0,this.gamePlay.showModalMessage("You lose!","129335"))}moveToRandomPosition(){let e,t;do{e=Math.floor(Math.random()*this.gameState.transitionCells.length);const a=this.gameState.transitionCells[e];t=this.gameState.getAllPlayer().some((e=>e.position===a))}while(t);return this.gameState.transitionCells[e]}}(b,L);T.init()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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L01vZGFsUG9wdXAuanMiLCJ3ZWJwYWNrOi8vanNfZGlwbG9tLy4vc3JjL2pzL3V0aWxzLmpzIiwid2VicGFjazovL2pzX2RpcGxvbS8uL3NyYy9qcy90aGVtZXMuanMiLCJ3ZWJwYWNrOi8vanNfZGlwbG9tLy4vc3JjL2pzL0dhbWVTdGF0ZS5qcyIsIndlYnBhY2s6Ly9qc19kaXBsb20vLi9zcmMvanMvY3Vyc29ycy5qcyIsIndlYnBhY2s6Ly9qc19kaXBsb20vLi9zcmMvanMvdHJhbnNpdGlvbkF0dGFja0NlbGxzLmpzIiwid2VicGFjazovL2pzX2RpcGxvbS8uL3NyYy9qcy9UZWFtLmpzIiwid2VicGFjazovL2pzX2RpcGxvbS8uL3NyYy9qcy9jaGFyYWN0ZXJzL0NoYXJhY3Rlci5qcyIsIndlYnBhY2s6Ly9qc19kaXBsb20vLi9zcmMvanMvUG9zaXRpb25lZENoYXJhY3Rlci5qcyIsIndlYnBhY2s6Ly9qc19kaXBsb20vLi9zcmMvanMvY2hhcmFjdGVycy9Cb3dtYW4uanMiLCJ3ZWJwYWNrOi8vanNfZGlwbG9tLy4vc3JjL2pzL2NoYXJhY3RlcnMvU3dvcmRzbWFuLmpzIiwid2VicGFjazovL2pzX2RpcGxvbS8uL3NyYy9qcy9jaGFyYWN0ZXJzL01hZ2ljaWFuLmpzIiwid2VicGFjazovL2pzX2RpcGxvbS8uL3NyYy9qcy9jaGFyYWN0ZXJzL0RhZW1vbi5qcyIsIndlYnBhY2s6Ly9qc19kaXBsb20vLi9zcmMvanMvY2hhcmFjdGVycy9VbmRlYWQuanMiLCJ3ZWJwYWNrOi8vanNfZGlwbG9tLy4vc3JjL2pzL2NoYXJhY3RlcnMvVmFtcGlyZS5qcyIsIndlYnBhY2s6Ly9qc19kaXBsb20vLi9zcmMvanMvY3JlYXRlUG9zaXRpb25zLmpzIiwid2VicGFjazovL2pzX2RpcGxvbS8uL3NyYy9qcy9nZW5lcmF0b3JzLmpzIiwid2VicGFjazovL2pzX2RpcGxvbS8uL3NyYy9qcy9hcHAuanMiLCJ3ZWJwYWNrOi8vanNfZGlwbG9tLy4vc3JjL2pzL0dhbWVQbGF5LmpzIiwid2VicGFjazovL2pzX2RpcGxvbS8uL3NyYy9qcy9HYW1lU3RhdGVTZXJ2aWNlLmpzIiwid2VicGFjazovL2pzX2RpcGxvbS8uL3NyYy9qcy9HYW1lQ29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbFBvcHVwIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuZWxlbU1vZGFsID0gbnVsbDtcbiAgICB0aGlzLmV2ZW50U2hvd01vZGFsID0gbnVsbDtcbiAgICB0aGlzLmV2ZW50SGlkZU1vZGFsID0gbnVsbDtcbiAgICB0aGlzLmhpZGluZyA9IGZhbHNlO1xuICAgIHRoaXMuZGVzdHJveWVkID0gZmFsc2U7XG4gICAgdGhpcy5hbmltYXRpb25TcGVlZCA9IDIwMDtcblxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICB0aGlzLmNyZWF0ZU1vZGFsKCk7XG4gICAgdGhpcy5lbGVtTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZXJDbG9zZU1vZGFsLmJpbmQodGhpcykpO1xuXG4gICAgdGhpcy5ldmVudFNob3dNb2RhbCA9IG5ldyBDdXN0b21FdmVudCgnc2hvdy5tb2RhbEZ1bmMnLCB7IGRldGFpbDogdGhpcy5lbGVtTW9kYWwgfSk7XG4gICAgdGhpcy5ldmVudEhpZGVNb2RhbCA9IG5ldyBDdXN0b21FdmVudCgnaGlkZS5tb2RhbEZ1bmMnLCB7IGRldGFpbDogdGhpcy5lbGVtTW9kYWwgfSk7XG4gIH1cblxuICBjcmVhdGVNb2RhbCgpIHtcbiAgICB0aGlzLmVsZW1Nb2RhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IG1vZGFsVGVtcGxhdGUgPSAnPGRpdiBjbGFzcz1cIm1vZGFsX19iYWNrZHJvcFwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsRnVuY1wiPjxkaXYgY2xhc3M9XCJtb2RhbF9fY29udGVudFwiPjxkaXYgY2xhc3M9XCJtb2RhbF9faGVhZGVyXCI+PGRpdiBjbGFzcz1cIm1vZGFsX190aXRsZVwiIGRhdGEtbW9kYWxGdW5jPVwidGl0bGVcIj57e3RpdGxlfX08L2Rpdj48c3BhbiBjbGFzcz1cIm1vZGFsX19idG4tY2xvc2VcIiBkYXRhLWRpc21pc3M9XCJtb2RhbEZ1bmNcIiB0aXRsZT1cItCX0LDQutGA0YvRgtGMXCI+w5c8L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz1cIm1vZGFsX19ib2R5XCIgZGF0YS1tb2RhbEZ1bmM9XCJjb250ZW50XCI+e3tjb250ZW50fX08L2Rpdj57e2Zvb3Rlcn19PC9kaXY+PC9kaXY+JztcbiAgICBjb25zdCBtb2RhbEZvb3RlclRlbXBsYXRlID0gJzxkaXYgY2xhc3M9XCJtb2RhbF9fZm9vdGVyXCI+e3tidXR0b25zfX08L2Rpdj4nO1xuICAgIGNvbnN0IG1vZGFsQnV0dG9uVGVtcGxhdGUgPSAnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJ7e2J1dHRvbl9jbGFzc319XCIgZGF0YS1oYW5kbGVyPXt7YnV0dG9uX2hhbmRsZXJ9fT57e2J1dHRvbl90ZXh0fX08L2J1dHRvbj4nO1xuICAgIGxldCBtb2RhbEhUTUw7XG4gICAgbGV0IG1vZGFsRm9vdGVySFRNTCA9ICcnO1xuXG4gICAgdGhpcy5lbGVtTW9kYWwuY2xhc3NMaXN0LmFkZCgnbW9kYWxGdW5jJyk7XG4gICAgbW9kYWxIVE1MID0gbW9kYWxUZW1wbGF0ZS5yZXBsYWNlKFxuICAgICAgJ3t7dGl0bGV9fScsXG4gICAgICB0aGlzLm9wdGlvbnMudGl0bGUgfHwgJ9Cd0L7QstC+0LUg0L7QutC90L4nLFxuICAgICk7XG4gICAgbW9kYWxIVE1MID0gbW9kYWxIVE1MLnJlcGxhY2UoJ3t7Y29udGVudH19JywgdGhpcy5vcHRpb25zLmNvbnRlbnQgfHwgJycpO1xuICAgIGlmICh0aGlzLm9wdGlvbnMuZm9vdGVyQnV0dG9ucykge1xuICAgICAgZm9yIChjb25zdCBidXR0b24gb2YgdGhpcy5vcHRpb25zLmZvb3RlckJ1dHRvbnMpIHtcbiAgICAgICAgbGV0IG1vZGFsRm9vdGVyQnV0dG9uID0gbW9kYWxCdXR0b25UZW1wbGF0ZS5yZXBsYWNlKFxuICAgICAgICAgICd7e2J1dHRvbl9jbGFzc319JyxcbiAgICAgICAgICBidXR0b24uY2xhc3MsXG4gICAgICAgICk7XG4gICAgICAgIG1vZGFsRm9vdGVyQnV0dG9uID0gbW9kYWxGb290ZXJCdXR0b24ucmVwbGFjZShcbiAgICAgICAgICAne3tidXR0b25faGFuZGxlcn19JyxcbiAgICAgICAgICBidXR0b24uaGFuZGxlcixcbiAgICAgICAgKTtcbiAgICAgICAgbW9kYWxGb290ZXJCdXR0b24gPSBtb2RhbEZvb3RlckJ1dHRvbi5yZXBsYWNlKFxuICAgICAgICAgICd7e2J1dHRvbl90ZXh0fX0nLFxuICAgICAgICAgIGJ1dHRvbi50ZXh0LFxuICAgICAgICApO1xuICAgICAgICBtb2RhbEZvb3RlckhUTUwgKz0gbW9kYWxGb290ZXJCdXR0b247XG4gICAgICB9XG4gICAgICBtb2RhbEZvb3RlckhUTUwgPSBtb2RhbEZvb3RlclRlbXBsYXRlLnJlcGxhY2UoXG4gICAgICAgICd7e2J1dHRvbnN9fScsXG4gICAgICAgIG1vZGFsRm9vdGVySFRNTCxcbiAgICAgICk7XG4gICAgfVxuICAgIG1vZGFsSFRNTCA9IG1vZGFsSFRNTC5yZXBsYWNlKCd7e2Zvb3Rlcn19JywgbW9kYWxGb290ZXJIVE1MKTtcbiAgICB0aGlzLmVsZW1Nb2RhbC5pbm5lckhUTUwgPSBtb2RhbEhUTUw7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1Nb2RhbCk7XG4gIH1cblxuICBzaG93KCkge1xuICAgIGlmICghdGhpcy5kZXN0cm95ZWQgJiYgIXRoaXMuaGlkaW5nKSB7XG4gICAgICB0aGlzLmVsZW1Nb2RhbC5jbGFzc0xpc3QuYWRkKCdtb2RhbF9fc2hvdycpO1xuICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudCh0aGlzLmV2ZW50U2hvd01vZGFsKTtcbiAgICB9XG4gIH1cblxuICBoaWRlKCkge1xuICAgIHRoaXMuaGlkaW5nID0gdHJ1ZTtcbiAgICB0aGlzLmVsZW1Nb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbF9fc2hvdycpO1xuICAgIHRoaXMuZWxlbU1vZGFsLmNsYXNzTGlzdC5hZGQoJ21vZGFsX19oaWRpbmcnKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuZWxlbU1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsX19oaWRpbmcnKTtcbiAgICAgIHRoaXMuaGlkaW5nID0gZmFsc2U7XG4gICAgfSwgdGhpcy5hbmltYXRpb25TcGVlZCk7XG4gICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudCh0aGlzLmV2ZW50SGlkZU1vZGFsKTtcbiAgfVxuXG4gIGhhbmRsZXJDbG9zZU1vZGFsKGUpIHtcbiAgICBpZiAoZS50YXJnZXQuZGF0YXNldC5kaXNtaXNzID09PSAnbW9kYWxGdW5jJyB8fCBlLnRhcmdldC5kYXRhc2V0LmhhbmRsZXIpIHtcbiAgICAgIHRoaXMuaGlkZSgpO1xuICAgIH1cbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgaWYgKHRoaXMuZWxlbU1vZGFsLnBhcmVudEVsZW1lbnQpIHtcbiAgICAgIHRoaXMuZWxlbU1vZGFsLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5lbGVtTW9kYWwpO1xuICAgIH1cbiAgICB0aGlzLmVsZW1Nb2RhbC5yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgIHRoaXMuaGFuZGxlckNsb3NlTW9kYWwuYmluZCh0aGlzKSxcbiAgICApO1xuICB9XG5cbiAgc2V0Q29udGVudChodG1sKSB7XG4gICAgdGhpcy5lbGVtTW9kYWwucXVlcnlTZWxlY3RvcignW2RhdGEtbW9kYWxGdW5jPVwiY29udGVudFwiXScpLmlubmVySFRNTCA9IGh0bWw7XG4gIH1cblxuICBzZXRUaXRsZSh0ZXh0KSB7XG4gICAgdGhpcy5lbGVtTW9kYWwucXVlcnlTZWxlY3RvcignW2RhdGEtbW9kYWxGdW5jPVwidGl0bGVcIl0nKS5pbm5lckhUTUwgPSB0ZXh0O1xuICB9XG59XG4iLCIvKipcbiAqIEB0b2RvXG4gKiBAcGFyYW0gaW5kZXggLSDQuNC90LTQtdC60YEg0L/QvtC70Y9cbiAqIEBwYXJhbSBib2FyZFNpemUgLSDRgNCw0LfQvNC10YAg0LrQstCw0LTRgNCw0YLQvdC+0LPQviDQv9C+0LvRjyAo0LIg0LTQu9C40L3RgyDQuNC70Lgg0YjQuNGA0LjQvdGDKVxuICogQHJldHVybnMg0YHRgtGA0L7QutCwIC0g0YLQuNC/INGP0YfQtdC50LrQuCDQvdCwINC/0L7Qu9C1OlxuICpcbiAqIHRvcC1sZWZ0XG4gKiB0b3AtcmlnaHRcbiAqIHRvcFxuICogYm90dG9tLWxlZnRcbiAqIGJvdHRvbS1yaWdodFxuICogYm90dG9tXG4gKiByaWdodFxuICogbGVmdFxuICogY2VudGVyXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYGpzXG4gKiBjYWxjVGlsZVR5cGUoMCwgOCk7IC8vICd0b3AtbGVmdCdcbiAqIGNhbGNUaWxlVHlwZSgxLCA4KTsgLy8gJ3RvcCdcbiAqIGNhbGNUaWxlVHlwZSg2MywgOCk7IC8vICdib3R0b20tcmlnaHQnXG4gKiBjYWxjVGlsZVR5cGUoNywgNyk7IC8vICdsZWZ0J1xuICogYGBgXG4gKiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbGNUaWxlVHlwZShpbmRleCwgYm9hcmRTaXplKSB7XG4gIC8vIFRPRE86INCy0LDRiCDQutC+0LQg0LHRg9C00LXRgiDRgtGD0YJcbiAgaWYgKGluZGV4IDwgYm9hcmRTaXplIC0gMSAmJiBpbmRleCA+IDApIHtcbiAgICByZXR1cm4gJ3RvcCc7XG4gIH1cbiAgaWYgKGluZGV4IDwgYm9hcmRTaXplICoqIDIgLSAxICYmIGluZGV4ID4gYm9hcmRTaXplICoqIDIgLSBib2FyZFNpemUpIHtcbiAgICByZXR1cm4gJ2JvdHRvbSc7XG4gIH1cbiAgZm9yIChsZXQgaSA9IDE7IGkgPCBib2FyZFNpemUgLSAxOyBpICs9IDEpIHtcbiAgICBpZiAoaW5kZXggPT09IGJvYXJkU2l6ZSAqIGkpIHtcbiAgICAgIHJldHVybiAnbGVmdCc7XG4gICAgfVxuICAgIGlmIChpbmRleCA9PT0gYm9hcmRTaXplICogaSArIChib2FyZFNpemUgLSAxKSkge1xuICAgICAgcmV0dXJuICdyaWdodCc7XG4gICAgfVxuICB9XG5cbiAgc3dpdGNoIChpbmRleCkge1xuICAgIGNhc2UgMDpcbiAgICAgIHJldHVybiAndG9wLWxlZnQnO1xuICAgIGNhc2UgYm9hcmRTaXplIC0gMTpcbiAgICAgIHJldHVybiAndG9wLXJpZ2h0JztcbiAgICBjYXNlIGJvYXJkU2l6ZSAqIChib2FyZFNpemUgLSAxKTpcbiAgICAgIHJldHVybiAnYm90dG9tLWxlZnQnO1xuICAgIGNhc2UgYm9hcmRTaXplICoqIDIgLSAxOlxuICAgICAgcmV0dXJuICdib3R0b20tcmlnaHQnO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gJ2NlbnRlcic7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhbGNIZWFsdGhMZXZlbChoZWFsdGgpIHtcbiAgaWYgKGhlYWx0aCA8IDE1KSB7XG4gICAgcmV0dXJuICdjcml0aWNhbCc7XG4gIH1cblxuICBpZiAoaGVhbHRoIDwgNTApIHtcbiAgICByZXR1cm4gJ25vcm1hbCc7XG4gIH1cblxuICByZXR1cm4gJ2hpZ2gnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzdG9yZUNoYXJhY3RlcnMoY2hhcmFjdGVycywgcmVzdG9yZUZuKSB7XG4gIHJldHVybiBjaGFyYWN0ZXJzLm1hcChyZXN0b3JlRm4pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBBdHRhY2tEZWZlbmNlKGJlZm9yZSwgbGlmZSkge1xuICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLm1heChiZWZvcmUsIChiZWZvcmUgKiAoODAgKyBsaWZlKSkgLyAxMDApKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZURhbWFnZShhdHRhY2ssIGRlZmVuY2UpIHtcbiAgcmV0dXJuIE1hdGgucm91bmQoTWF0aC5tYXgoYXR0YWNrIC0gZGVmZW5jZSwgYXR0YWNrICogMC4zKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbmZvKHBsYXllcikge1xuICByZXR1cm4gYFxcdXsxRjM5Nn0ke3BsYXllci5sZXZlbH0gXFx1MjY5NCR7cGxheWVyLmF0dGFja30gXFx1ezFGNkUxfSR7cGxheWVyLmRlZmVuY2V9IFxcdTI3NjQke3BsYXllci5oZWFsdGh9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG92ZXJ3cml0ZVByb3BlcnRpZXModGFyZ2V0LCBzb3VyY2UpIHtcbiAgT2JqZWN0LmFzc2lnbih0YXJnZXQsIHNvdXJjZSk7XG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSYW5kb21DaGFyYWN0ZXIodGVhbSkge1xuICBjb25zdCByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRlYW0ubGVuZ3RoKTtcbiAgcmV0dXJuIHRlYW1bcmFuZG9tSW5kZXhdO1xufVxuIiwiY29uc3QgdGhlbWVzID0ge1xuICBwcmFpcmllOiAncHJhaXJpZScsXG4gIGRlc2VydDogJ2Rlc2VydCcsXG4gIGFyY3RpYzogJ2FyY3RpYycsXG4gIG1vdW50YWluOiAnbW91bnRhaW4nLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgdGhlbWVzO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZVN0YXRlIHtcbiAgY29uc3RydWN0b3IoZ2FtZVBsYXkpIHtcbiAgICB0aGlzLmxldmVsR2FtZSA9IDE7XG4gICAgdGhpcy5nYW1lUGxheSA9IGdhbWVQbGF5O1xuICAgIHRoaXMuaXNNb3ZlID0gJ3VzZXInO1xuICAgIHRoaXMuY291bnRDbGljayA9IDA7XG4gICAgdGhpcy51c2VyVGVhbVN1cnZpdm9ycyA9IFtdO1xuICAgIHRoaXMuaGlzdG9yeSA9IFtdO1xuICAgIHRoaXMucG9pbnRzID0gMDtcbiAgICB0aGlzLmJsb2NrID0gZmFsc2U7XG4gICAgdGhpcy51c2VyVGVhbSA9IFtdO1xuICAgIHRoaXMuY29tcFRlYW0gPSBbXTtcbiAgICB0aGlzLmFjdGl2ZUNoYXIgPSBudWxsO1xuICAgIHRoaXMuaW5kZXhTZWxlY3QgPSBudWxsO1xuICAgIHRoaXMudHJhbnNpdGlvbkNlbGxzID0gW107XG4gICAgdGhpcy5hdHRhY2tDZWxscyA9IFtdO1xuICAgIHRoaXMuc2hvd01vZGFsID0gZmFsc2U7XG4gIH1cblxuICBnZXRBbGxQbGF5ZXIoKSB7XG4gICAgaWYgKCF0aGlzLnVzZXJUZWFtIHx8ICF0aGlzLmNvbXBUZWFtKSB0aHJvdyBuZXcgRXJyb3IoJ2l0IG11c3QgaGF2ZSAyIGFyZ3VtZW50cycpO1xuICAgIHJldHVybiBbLi4udGhpcy51c2VyVGVhbSwgLi4udGhpcy5jb21wVGVhbV07XG4gIH1cblxuICBjYWxjdWxhdGVTdW1Qb2ludHMoKSB7XG4gICAgcmV0dXJuIHRoaXMudXNlclRlYW0ucmVkdWNlKChhLCBiKSA9PiBhICsgYi5jaGFyYWN0ZXIuaGVhbHRoLCAwKTtcbiAgfVxuXG4gIGdldFVzZXJQb3NpdGlvbigpIHtcbiAgICBjb25zdCBmb3VuZEl0ZW0gPSB0aGlzLnVzZXJUZWFtLmZpbmQoKGl0ZW0pID0+IHRoaXMuYXR0YWNrQ2VsbHMuaW5jbHVkZXMoaXRlbS5wb3NpdGlvbikpO1xuICAgIHJldHVybiBmb3VuZEl0ZW0gPyBmb3VuZEl0ZW0ucG9zaXRpb24gOiB1bmRlZmluZWQ7XG4gIH1cblxuICBmaW5kUHJlc3VtZWREZWNlYXNlZFBsYXllcigpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRBbGxQbGF5ZXIoKS5maW5kKChlKSA9PiBlLnBvc2l0aW9uID09PSB0aGlzLmFjdGl2ZUNoYXJVc2VyPy5wb3NpdGlvbik7XG4gIH1cblxuICBnZXRQcmVzdW1lZERlY2Vhc2VkUGxheWVySW5mbyhwb3NpdGlvbikge1xuICAgIGNvbnN0IHRlYW0gPSB0aGlzLmlzTW92ZSA9PT0gJ2NvbXAnID8gdGhpcy51c2VyVGVhbSA6IHRoaXMuY29tcFRlYW07XG5cbiAgICByZXR1cm4ge1xuICAgICAgaW5kZXg6IHRlYW0uZmluZEluZGV4KChpdGVtKSA9PiBwb3NpdGlvbiA9PT0gaXRlbS5wb3NpdGlvbiksXG4gICAgICB0ZWFtS2V5OiB0aGlzLmlzTW92ZSA9PT0gJ2NvbXAnID8gJ3VzZXJUZWFtJyA6ICdjb21wVGVhbScsXG4gICAgfTtcbiAgfVxuXG4gIGdldFBsYXllcihpbmRleCkge1xuICAgIHJldHVybiB0aGlzLmdldEFsbFBsYXllcigpLmZpbmQoKGVsKSA9PiBlbC5wb3NpdGlvbiA9PT0gaW5kZXgpO1xuICB9XG59XG4iLCJjb25zdCBjdXJzb3JzID0ge1xuICBhdXRvOiAnYXV0bycsXG4gIHBvaW50ZXI6ICdwb2ludGVyJyxcbiAgY3Jvc3NoYWlyOiAnY3Jvc3NoYWlyJyxcbiAgbm90YWxsb3dlZDogJ25vdC1hbGxvd2VkJyxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGN1cnNvcnM7XG4iLCIvLyBjcmVhdGUgdHdvLWRpbWVuc2lvbmFsIGZpZWxkXG5mdW5jdGlvbiBnZXRUYWJsZShjZWxscywgYm9hcmRTaXplKSB7XG4gIGNvbnN0IHJlc3VsdCA9IFtdO1xuICBmb3IgKFxuICAgIGxldCBzID0gMCwgZSA9IGJvYXJkU2l6ZTtcbiAgICBzIDwgY2VsbHMubGVuZ3RoO1xuICAgIHMgKz0gYm9hcmRTaXplLCBlICs9IGJvYXJkU2l6ZVxuICApIHtcbiAgICByZXN1bHQucHVzaChjZWxscy5zbGljZShzLCBlKSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gZ2V0QXR0YWNrQ2VsbHMoY2VsbHMsIGluZGV4LCBtYXhSYW5nZSkge1xuICBjb25zdCBhbGxvd2VkQ2VsbHMgPSBbXTtcbiAgbGV0IGZpbmRJbmRleDtcbiAgbGV0IHJvdztcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjZWxscy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIHJvdyA9IGk7XG4gICAgZmluZEluZGV4ID0gY2VsbHNbaV0uZmluZEluZGV4KChlbCkgPT4gZWwgPT09IGluZGV4KTtcbiAgICBpZiAoZmluZEluZGV4ICE9PSAtMSkgYnJlYWs7XG4gIH1cbiAgZm9yIChsZXQgaSA9IC1tYXhSYW5nZTsgaSA8PSBtYXhSYW5nZTsgaSArPSAxKSB7XG4gICAgZm9yIChsZXQgaiA9IC1tYXhSYW5nZTsgaiA8PSBtYXhSYW5nZTsgaiArPSAxKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHJvdyArIGkgPj0gMFxuICAgICAgICAmJiBmaW5kSW5kZXggKyBqID49IDBcbiAgICAgICAgJiYgcm93ICsgaSA8IGNlbGxzLmxlbmd0aFxuICAgICAgICAmJiBmaW5kSW5kZXggKyBqIDwgY2VsbHMubGVuZ3RoXG4gICAgICAgICYmIGNlbGxzW3JvdyArIGldW2ZpbmRJbmRleCArIGpdICE9PSBpbmRleFxuICAgICAgKSB7XG4gICAgICAgIGFsbG93ZWRDZWxscy5wdXNoKGNlbGxzW3JvdyArIGldW2ZpbmRJbmRleCArIGpdKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIGFsbG93ZWRDZWxscztcbn1cblxuZnVuY3Rpb24gZ2V0VHJhbnNpdGlvbkNlbGxzKGNlbGxzLCBpbmRleCwgbWF4UmFuZ2UpIHtcbiAgY29uc3QgdHJhbnNpdENlbGxzID0gW107XG4gIGxldCBmaW5kSW5kZXg7XG4gIGxldCByb3c7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY2VsbHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICByb3cgPSBpO1xuICAgIGZpbmRJbmRleCA9IGNlbGxzW2ldLmZpbmRJbmRleCgoZWwpID0+IGVsID09PSBpbmRleCk7XG4gICAgaWYgKGZpbmRJbmRleCAhPT0gLTEpIGJyZWFrO1xuICB9XG5cbiAgZm9yIChsZXQgaSA9IDE7IGkgPD0gbWF4UmFuZ2U7IGkgKz0gMSkge1xuICAgIGlmIChmaW5kSW5kZXggLSBpID49IDApIHtcbiAgICAgIHRyYW5zaXRDZWxscy5wdXNoKGNlbGxzW3Jvd11bZmluZEluZGV4IC0gaV0pO1xuICAgIH1cblxuICAgIGlmIChmaW5kSW5kZXggKyBpIDwgY2VsbHMubGVuZ3RoKSB7XG4gICAgICB0cmFuc2l0Q2VsbHMucHVzaChjZWxsc1tyb3ddW2ZpbmRJbmRleCArIGldKTtcbiAgICB9XG4gICAgaWYgKHJvdyArIGkgPCBjZWxscy5sZW5ndGggJiYgZmluZEluZGV4IC0gaSA+PSAwKSB7XG4gICAgICB0cmFuc2l0Q2VsbHMucHVzaChjZWxsc1tyb3cgKyBpXVtmaW5kSW5kZXggLSBpXSk7XG4gICAgfVxuXG4gICAgaWYgKHJvdyArIGkgPCBjZWxscy5sZW5ndGggJiYgZmluZEluZGV4ICsgaSA8IGNlbGxzLmxlbmd0aCkge1xuICAgICAgdHJhbnNpdENlbGxzLnB1c2goY2VsbHNbcm93ICsgaV1bZmluZEluZGV4ICsgaV0pO1xuICAgIH1cblxuICAgIGlmIChyb3cgLSBpID49IDAgJiYgZmluZEluZGV4IC0gaSA+PSAwKSB7XG4gICAgICB0cmFuc2l0Q2VsbHMucHVzaChjZWxsc1tyb3cgLSBpXVtmaW5kSW5kZXggLSBpXSk7XG4gICAgfVxuXG4gICAgaWYgKHJvdyAtIGkgPj0gMCAmJiBmaW5kSW5kZXggKyBpIDwgY2VsbHMubGVuZ3RoKSB7XG4gICAgICB0cmFuc2l0Q2VsbHMucHVzaChjZWxsc1tyb3cgLSBpXVtmaW5kSW5kZXggKyBpXSk7XG4gICAgfVxuXG4gICAgaWYgKHJvdyAtIGkgPj0gMCkge1xuICAgICAgdHJhbnNpdENlbGxzLnB1c2goY2VsbHNbcm93IC0gaV1bZmluZEluZGV4XSk7XG4gICAgfVxuXG4gICAgaWYgKHJvdyArIGkgPCBjZWxscy5sZW5ndGgpIHtcbiAgICAgIHRyYW5zaXRDZWxscy5wdXNoKGNlbGxzW3JvdyArIGldW2ZpbmRJbmRleF0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJhbnNpdENlbGxzO1xufVxuXG4vLyByZXR1cm5zIGNlbGxzIGFsbG93ZWQgZm9yIGFjdGlvblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0VHJhbnNpdGlvbkF0dGFja0NlbGxzKFxuICBpbmRleCxcbiAgYm9hcmRTaXplLFxuICBtYXhSYW5nZSxcbiAgYXR0YWNrID0gZmFsc2UsXG4pIHtcbiAgY29uc3QgYXJyYXlDZWxscyA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGJvYXJkU2l6ZSAqKiAyOyBpICs9IDEpIHtcbiAgICBhcnJheUNlbGxzLnB1c2goaSk7XG4gIH1cblxuICBjb25zdCB0YWJsZUNlbGxzID0gZ2V0VGFibGUoYXJyYXlDZWxscywgYm9hcmRTaXplKTtcbiAgaWYgKGF0dGFjaykge1xuICAgIHJldHVybiBnZXRBdHRhY2tDZWxscyh0YWJsZUNlbGxzLCBpbmRleCwgbWF4UmFuZ2UpO1xuICB9XG4gIHJldHVybiBnZXRUcmFuc2l0aW9uQ2VsbHModGFibGVDZWxscywgaW5kZXgsIG1heFJhbmdlKTtcbn1cbiIsIi8qKlxuICog0JrQu9Cw0YHRgSwg0L/RgNC10LTRgdGC0LDQstC70Y/RjtGJ0LjQuSDQv9C10YDRgdC+0L3QsNC20LXQuSDQutC+0LzQsNC90LTRi1xuICpcbiAqIEB0b2RvINCh0LDQvNC+0YHRgtC+0Y/RgtC10LvRjNC90L4g0L/RgNC+0LTRg9C80LDQudGC0LUg0YXRgNCw0L3QtdC90LjQtSDQv9C10YDRgdC+0L3QsNC20LXQuSDQsiDQutC70LDRgdGB0LVcbiAqINCd0LDQv9GA0LjQvNC10YBcbiAqIEBleGFtcGxlXG4gKiBgYGBqc1xuICogY29uc3QgY2hhcmFjdGVycyA9IFtuZXcgU3dvcmRzbWFuKDIpLCBuZXcgQm93bWFuKDEpXVxuICogY29uc3QgdGVhbSA9IG5ldyBUZWFtKGNoYXJhY3RlcnMpO1xuICpcbiAqIHRlYW0uY2hhcmFjdGVycyAvLyBbc3dvcmRzbWFuLCBib3dtYW5dXG4gKiBgYGBcbiAqICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUZWFtIHtcbiAgLy8gVE9ETzogd3JpdGUgeW91ciBsb2dpYyBoZXJlXG4gIGNvbnN0cnVjdG9yKGNoYXJhY3RlcnMpIHtcbiAgICB0aGlzLmNoYXJhY3RlcnMgPSBjaGFyYWN0ZXJzO1xuICB9XG59XG4iLCJpbXBvcnQgeyB1cEF0dGFja0RlZmVuY2UgfSBmcm9tICcuLi91dGlscyc7XG5cbi8qKlxuICog0JHQsNC30L7QstGL0Lkg0LrQu9Cw0YHRgSwg0L7RgiDQutC+0YLQvtGA0L7Qs9C+INC90LDRgdC70LXQtNGD0Y7RgtGB0Y8g0LrQu9Cw0YHRgdGLINC/0LXRgNGB0L7QvdCw0LbQtdC5XG4gKiBAcHJvcGVydHkgbGV2ZWwgLSDRg9GA0L7QstC10L3RjCDQv9C10YDRgdC+0L3QsNC20LAsINC+0YIgMSDQtNC+IDRcbiAqIEBwcm9wZXJ0eSBhdHRhY2sgLSDQv9C+0LrQsNC30LDRgtC10LvRjCDQsNGC0LDQutC4XG4gKiBAcHJvcGVydHkgZGVmZW5jZSAtINC/0L7QutCw0LfQsNGC0LXQu9GMINC30LDRidC40YLRi1xuICogQHByb3BlcnR5IGhlYWx0aCAtINC30LTQvtGA0L7QstGM0LUg0L/QtdGA0YHQvtC90LDQttCwXG4gKiBAcHJvcGVydHkgdHlwZSAtINGB0YLRgNC+0LrQsCDRgSDQvtC00L3QuNC8INC40Lcg0LTQvtC/0YPRgdGC0LjQvNGL0YUg0LfQvdCw0YfQtdC90LjQuTpcbiAqIHN3b3Jkc21hblxuICogYm93bWFuXG4gKiBtYWdpY2lhblxuICogZGFlbW9uXG4gKiB1bmRlYWRcbiAqIHZhbXBpcmVcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2hhcmFjdGVyIHtcbiAgY29uc3RydWN0b3IobGV2ZWwsIHR5cGUgPSAnZ2VuZXJpYycpIHtcbiAgICBpZiAobmV3LnRhcmdldC5uYW1lID09PSAnQ2hhcmFjdGVyJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNsYXNzJyk7XG4gICAgfVxuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgdGhpcy5sZXZlbCA9IGxldmVsO1xuICAgIHRoaXMuYXR0YWNrID0gMDtcbiAgICB0aGlzLmRlZmVuY2UgPSAwO1xuICAgIHRoaXMuaGVhbHRoID0gNTA7XG4gIH1cblxuICBsZXZlbFVwKCkge1xuICAgIGlmICh0aGlzLmhlYWx0aCA8PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBsZXZlbCB1cCBhIGRlYWQgY2hhcmFjdGVyXCIpO1xuICAgIH1cblxuICAgIHRoaXMubGV2ZWwgPSBNYXRoLm1pbih0aGlzLmxldmVsICsgMSwgNCk7XG4gICAgdGhpcy5hdHRhY2sgPSB1cEF0dGFja0RlZmVuY2UodGhpcy5hdHRhY2ssIHRoaXMuaGVhbHRoKTtcbiAgICB0aGlzLmRlZmVuY2UgPSB1cEF0dGFja0RlZmVuY2UodGhpcy5kZWZlbmNlLCB0aGlzLmhlYWx0aCk7XG4gICAgdGhpcy5oZWFsdGggPSBNYXRoLm1pbih0aGlzLmhlYWx0aCArIDgwLCAxMDApO1xuICB9XG59XG4iLCJpbXBvcnQgQ2hhcmFjdGVyIGZyb20gJy4vY2hhcmFjdGVycy9DaGFyYWN0ZXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3NpdGlvbmVkQ2hhcmFjdGVyIHtcbiAgY29uc3RydWN0b3IoY2hhcmFjdGVyLCBwb3NpdGlvbikge1xuICAgIHRoaXMuY2hhcmFjdGVyID0gY2hhcmFjdGVyO1xuICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgfVxuXG4gIHNldCBjaGFyYWN0ZXIodmFsdWUpIHtcbiAgICBpZiAoISh2YWx1ZSBpbnN0YW5jZW9mIENoYXJhY3RlcikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ2NoYXJhY3RlciBtdXN0IGJlIGluc3RhbmNlIG9mIENoYXJhY3RlciBvciBpdHMgY2hpbGRyZW4nLFxuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy5fY2hhcmFjdGVyID0gdmFsdWU7XG4gIH1cblxuICBnZXQgY2hhcmFjdGVyKCkge1xuICAgIHJldHVybiB0aGlzLl9jaGFyYWN0ZXI7XG4gIH1cblxuICBzZXQgcG9zaXRpb24odmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdwb3NpdGlvbiBtdXN0IGJlIGEgbnVtYmVyJyk7XG4gICAgfVxuICAgIHRoaXMuX3Bvc2l0aW9uID0gdmFsdWU7XG4gIH1cblxuICBnZXQgcG9zaXRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Bvc2l0aW9uO1xuICB9XG59XG4iLCJpbXBvcnQgQ2hhcmFjdGVyIGZyb20gJy4vQ2hhcmFjdGVyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQm93bWFuIGV4dGVuZHMgQ2hhcmFjdGVyIHtcbiAgY29uc3RydWN0b3IobGV2ZWwgPSAxKSB7XG4gICAgc3VwZXIobGV2ZWwpO1xuICAgIHRoaXMudHlwZSA9ICdib3dtYW4nO1xuICAgIHRoaXMuYXR0YWNrID0gMjU7XG4gICAgdGhpcy5kZWZlbmNlID0gMjU7XG4gICAgdGhpcy5tYXhSYW5nZSA9IDI7XG4gICAgdGhpcy5tYXhBdHRhY2sgPSAyO1xuICB9XG59XG4iLCJpbXBvcnQgQ2hhcmFjdGVyIGZyb20gJy4vQ2hhcmFjdGVyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3dvcmRzbWFuIGV4dGVuZHMgQ2hhcmFjdGVyIHtcbiAgY29uc3RydWN0b3IobGV2ZWwgPSAxKSB7XG4gICAgc3VwZXIobGV2ZWwpO1xuICAgIHRoaXMudHlwZSA9ICdzd29yZHNtYW4nO1xuICAgIHRoaXMuYXR0YWNrID0gNDA7XG4gICAgdGhpcy5kZWZlbmNlID0gMTA7XG4gICAgdGhpcy5tYXhSYW5nZSA9IDQ7XG4gICAgdGhpcy5tYXhBdHRhY2sgPSAxO1xuICB9XG59XG4iLCJpbXBvcnQgQ2hhcmFjdGVyIGZyb20gJy4vQ2hhcmFjdGVyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFnaWNpYW4gZXh0ZW5kcyBDaGFyYWN0ZXIge1xuICBjb25zdHJ1Y3RvcihsZXZlbCA9IDEpIHtcbiAgICBzdXBlcihsZXZlbCk7XG4gICAgdGhpcy50eXBlID0gJ21hZ2ljaWFuJztcbiAgICB0aGlzLmF0dGFjayA9IDEwO1xuICAgIHRoaXMuZGVmZW5jZSA9IDQwO1xuICAgIHRoaXMubWF4UmFuZ2UgPSAxO1xuICAgIHRoaXMubWF4QXR0YWNrID0gNDtcbiAgfVxufVxuIiwiaW1wb3J0IENoYXJhY3RlciBmcm9tICcuL0NoYXJhY3Rlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERhZW1vbiBleHRlbmRzIENoYXJhY3RlciB7XG4gIGNvbnN0cnVjdG9yKGxldmVsID0gMSkge1xuICAgIHN1cGVyKGxldmVsKTtcbiAgICB0aGlzLnR5cGUgPSAnZGFlbW9uJztcbiAgICB0aGlzLmF0dGFjayA9IDEwO1xuICAgIHRoaXMuZGVmZW5jZSA9IDEwO1xuICAgIHRoaXMubWF4UmFuZ2UgPSAxO1xuICAgIHRoaXMubWF4QXR0YWNrID0gNDtcbiAgfVxufVxuIiwiaW1wb3J0IENoYXJhY3RlciBmcm9tICcuL0NoYXJhY3Rlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVuZGVhZCBleHRlbmRzIENoYXJhY3RlciB7XG4gIGNvbnN0cnVjdG9yKGxldmVsID0gMSkge1xuICAgIHN1cGVyKGxldmVsKTtcbiAgICB0aGlzLnR5cGUgPSAndW5kZWFkJztcbiAgICB0aGlzLmF0dGFjayA9IDQwO1xuICAgIHRoaXMuZGVmZW5jZSA9IDEwO1xuICAgIHRoaXMubWF4UmFuZ2UgPSA0O1xuICAgIHRoaXMubWF4QXR0YWNrID0gMTtcbiAgfVxufVxuIiwiaW1wb3J0IENoYXJhY3RlciBmcm9tICcuL0NoYXJhY3Rlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZhbXBpcmUgZXh0ZW5kcyBDaGFyYWN0ZXIge1xuICBjb25zdHJ1Y3RvcihsZXZlbCA9IDEpIHtcbiAgICBzdXBlcihsZXZlbCk7XG4gICAgdGhpcy50eXBlID0gJ3ZhbXBpcmUnO1xuICAgIHRoaXMuYXR0YWNrID0gMjU7XG4gICAgdGhpcy5kZWZlbmNlID0gMjU7XG4gICAgdGhpcy5tYXhSYW5nZSA9IDI7XG4gICAgdGhpcy5tYXhBdHRhY2sgPSAyO1xuICB9XG59XG4iLCJpbXBvcnQgeyBnZW5lcmF0ZVRlYW0gfSBmcm9tICcuL2dlbmVyYXRvcnMnO1xuaW1wb3J0IFBvc2l0aW9uZWRDaGFyYWN0ZXIgZnJvbSAnLi9Qb3NpdGlvbmVkQ2hhcmFjdGVyJztcbmltcG9ydCBCb3dtYW4gZnJvbSAnLi9jaGFyYWN0ZXJzL0Jvd21hbic7XG5pbXBvcnQgU3dvcmRzbWFuIGZyb20gJy4vY2hhcmFjdGVycy9Td29yZHNtYW4nO1xuaW1wb3J0IE1hZ2ljaWFuIGZyb20gJy4vY2hhcmFjdGVycy9NYWdpY2lhbic7XG5pbXBvcnQgRGFlbW9uIGZyb20gJy4vY2hhcmFjdGVycy9EYWVtb24nO1xuaW1wb3J0IFVuZGVhZCBmcm9tICcuL2NoYXJhY3RlcnMvVW5kZWFkJztcbmltcG9ydCBWYW1waXJlIGZyb20gJy4vY2hhcmFjdGVycy9WYW1waXJlJztcblxuZXhwb3J0IGZ1bmN0aW9uIGNob29zZVJhbmRQb3NpdGlvbnMoYm9hcmRTaXplLCBvcHBvbmVudCA9IGZhbHNlKSB7XG4gIGNvbnN0IGNlbGxzID0gW107XG4gIGlmICghb3Bwb25lbnQpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJvYXJkU2l6ZSAqKiAyOyBpICs9IDgpIHtcbiAgICAgIGNlbGxzLnB1c2goaSk7XG4gICAgICBjZWxscy5wdXNoKGkgKyAxKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgZm9yIChsZXQgaSA9IGJvYXJkU2l6ZSAtIDI7IGkgPCBib2FyZFNpemUgKiogMjsgaSArPSBib2FyZFNpemUpIHtcbiAgICAgIGNlbGxzLnB1c2goaSk7XG4gICAgICBjZWxscy5wdXNoKGkgKyAxKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGNlbGxzO1xufVxuXG5mdW5jdGlvbiBjaG9vc2VSYW5kUG9zaXRpb24oYm9hcmRTaXplLCBvcHBvbmVudCA9IGZhbHNlKSB7XG4gIGNvbnN0IGNlbGxzID0gY2hvb3NlUmFuZFBvc2l0aW9ucyhib2FyZFNpemUsIG9wcG9uZW50KTtcbiAgY29uc3QgcmFuZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNlbGxzLmxlbmd0aCk7XG4gIHJldHVybiBjZWxsc1tyYW5kXTtcbn1cblxuLyogZXNsaW50LWRpc2FibGUgKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWF0ZVBvc2l0aW9uc0NoYXIoXG4gIHBsYXllclR5cGVzLFxuICBib2FyZFNpemUsXG4gIG9wcG9uZW50LFxuICBbbWF4TGV2ZWwsIGNoYXJDb3VudF1cbikge1xuICBjb25zdCBwb3NpdGlvbnMgPSBbXTtcbiAgaWYgKG1heExldmVsID49IDQpIG1heExldmVsID0gNDtcbiAgaWYgKGNoYXJDb3VudCA+PSAxMCkgY2hhckNvdW50ID0gMTA7XG4gIGNvbnN0IHRlYW0gPSBnZW5lcmF0ZVRlYW0ocGxheWVyVHlwZXMsIG1heExldmVsLCBjaGFyQ291bnQpO1xuXG4gIGNvbnN0IHJhbmRQb3NpdGlvbnMgPSBbXTtcbiAgdGVhbS5jaGFyYWN0ZXJzLmZvckVhY2goKGNoYXIpID0+IHtcbiAgICBsZXQgcmFuZFBvc2l0aW9uO1xuICAgIGxldCBpc1Bvc2l0aW9uVW5pcXVlID0gZmFsc2U7XG4gICAgZG8ge1xuICAgICAgcmFuZFBvc2l0aW9uID0gY2hvb3NlUmFuZFBvc2l0aW9uKGJvYXJkU2l6ZSwgb3Bwb25lbnQpO1xuICAgICAgaWYgKHJhbmRQb3NpdGlvbnMuZmluZCgoZWwpID0+IGVsID09PSByYW5kUG9zaXRpb24pKSB7XG4gICAgICAgIHJhbmRQb3NpdGlvbiA9IGNob29zZVJhbmRQb3NpdGlvbihib2FyZFNpemUsIG9wcG9uZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJhbmRQb3NpdGlvbnMucHVzaChyYW5kUG9zaXRpb24pO1xuICAgICAgICBpc1Bvc2l0aW9uVW5pcXVlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9IHdoaWxlICghaXNQb3NpdGlvblVuaXF1ZSk7XG4gICAgcG9zaXRpb25zLnB1c2gobmV3IFBvc2l0aW9uZWRDaGFyYWN0ZXIoY2hhciwgcmFuZFBvc2l0aW9uKSk7XG4gIH0pO1xuICByZXR1cm4gcG9zaXRpb25zO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzdG9yZUNoYXIob2JqKSB7XG4gIGlmICghb2JqKSByZXR1cm4gbnVsbDtcbiBcbiAgY29uc3QgY2hhckNsYXNzZXMgPSB7XG4gICAgYm93bWFuOiBCb3dtYW4sXG4gICAgc3dvcmRzbWFuOiBTd29yZHNtYW4sXG4gICAgbWFnaWNpYW46IE1hZ2ljaWFuLFxuICAgIGRhZW1vbjogRGFlbW9uLFxuICAgIHVuZGVhZDogVW5kZWFkLFxuICAgIHZhbXBpcmU6IFZhbXBpcmUsXG4gIH07XG5cbiAgY29uc3QgQ2hhckNsYXNzID0gY2hhckNsYXNzZXNbb2JqLl9jaGFyYWN0ZXIudHlwZV0gfHwgbnVsbDtcbiAgY29uc3QgY2hhciA9IG5ldyBDaGFyQ2xhc3Mob2JqLl9jaGFyYWN0ZXIubGV2ZWwpO1xuICBjb25zdCByZXN0b3JlUG9zaXRpb25lZENoYXIgPSBuZXcgUG9zaXRpb25lZENoYXJhY3RlcihjaGFyLCBvYmouX3Bvc2l0aW9uKTtcblxuICBjaGFyLmF0dGFjayA9IG9iai5fY2hhcmFjdGVyLmF0dGFjaztcbiAgY2hhci5oZWFsdGggPSBvYmouX2NoYXJhY3Rlci5oZWFsdGg7XG4gIGNoYXIuZGVmZW5jZSA9IG9iai5fY2hhcmFjdGVyLmRlZmVuY2U7XG5cbiAgcmV0dXJuIHJlc3RvcmVQb3NpdGlvbmVkQ2hhcjtcbn1cbiIsImltcG9ydCBUZWFtIGZyb20gJy4vVGVhbSc7XG5cbi8qKlxuICog0KTQvtGA0LzQuNGA0YPQtdGCINGN0LrQt9C10LzQv9C70Y/RgCDQv9C10YDRgdC+0L3QsNC20LAg0LjQtyDQvNCw0YHRgdC40LLQsCBhbGxvd2VkVHlwZXMg0YHQvlxuICog0YHQu9GD0YfQsNC50L3Ri9C8INGD0YDQvtCy0L3QtdC8INC+0YIgMSDQtNC+IG1heExldmVsXG4gKlxuICogQHBhcmFtIGFsbG93ZWRUeXBlcyDQvNCw0YHRgdC40LIg0LrQu9Cw0YHRgdC+0LJcbiAqIEBwYXJhbSBtYXhMZXZlbCDQvNCw0LrRgdC40LzQsNC70YzQvdGL0Lkg0LLQvtC30LzQvtC20L3Ri9C5INGD0YDQvtCy0LXQvdGMINC/0LXRgNGB0L7QvdCw0LbQsFxuICogQHJldHVybnMg0LPQtdC90LXRgNCw0YLQvtGALCDQutC+0YLQvtGA0YvQuSDQv9GA0Lgg0LrQsNC20LTQvtC8INCy0YvQt9C+0LLQtSDQstC+0LfQstGA0LDRidCw0LXRgiDQvdC+0LLRi9C5INGN0LrQt9C10LzQv9C70Y/RgCDQutC70LDRgdGB0LAg0L/QtdGA0YHQvtC90LDQttCwXG4gKlxuICovXG5leHBvcnQgZnVuY3Rpb24qIGNoYXJhY3RlckdlbmVyYXRvcihhbGxvd2VkVHlwZXMsIG1heExldmVsKSB7XG4gIC8vIFRPRE86IHdyaXRlIGxvZ2ljIGhlcmVcbiAgd2hpbGUgKHRydWUpIHtcbiAgICBjb25zdCByYW5kb21MZXZlbCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG1heExldmVsICsgMSk7XG4gICAgY29uc3QgUmFuZG9tQ2xhc3MgPSBhbGxvd2VkVHlwZXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYWxsb3dlZFR5cGVzLmxlbmd0aCldO1xuICAgIHlpZWxkIG5ldyBSYW5kb21DbGFzcyhyYW5kb21MZXZlbCk7XG4gIH1cbn1cblxuLyoqXG4gKiDQpNC+0YDQvNC40YDRg9C10YIg0LzQsNGB0YHQuNCyINC/0LXRgNGB0L7QvdCw0LbQtdC5INC90LAg0L7RgdC90L7QstC1IGNoYXJhY3RlckdlbmVyYXRvclxuICogQHBhcmFtIGFsbG93ZWRUeXBlcyDQvNCw0YHRgdC40LIg0LrQu9Cw0YHRgdC+0LJcbiAqIEBwYXJhbSBtYXhMZXZlbCDQvNCw0LrRgdC40LzQsNC70YzQvdGL0Lkg0LLQvtC30LzQvtC20L3Ri9C5INGD0YDQvtCy0LXQvdGMINC/0LXRgNGB0L7QvdCw0LbQsFxuICogQHBhcmFtIGNoYXJhY3RlckNvdW50INC60L7Qu9C40YfQtdGB0YLQstC+INC/0LXRgNGB0L7QvdCw0LbQtdC5LCDQutC+0YLQvtGA0L7QtSDQvdGD0LbQvdC+INGB0YTQvtGA0LzQuNGA0L7QstCw0YLRjFxuICogQHJldHVybnMg0Y3QutC30LXQvNC/0LvRj9GAIFRlYW0sINGF0YDQsNC90Y/RidC40Lkg0Y3QutC30LXQvNC/0LvRj9GA0Ysg0L/QtdGA0YHQvtC90LDQttC10LkuXG4gKiDQmtC+0LvQuNGH0LXRgdGC0LLQviDQv9C10YDRgdC+0L3QsNC20LXQuSDQsiDQutC+0LzQsNC90LTQtSAtIGNoYXJhY3RlckNvdW50XG4gKiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlVGVhbShhbGxvd2VkVHlwZXMsIG1heExldmVsLCBjaGFyYWN0ZXJDb3VudCkge1xuICAvLyBUT0RPOiB3cml0ZSBsb2dpYyBoZXJlXG4gIGNvbnN0IGNoYXJhY3RlcnMgPSBbXTtcbiAgY29uc3QgcGxheWVyR2VuZXJhdG9yID0gY2hhcmFjdGVyR2VuZXJhdG9yKGFsbG93ZWRUeXBlcywgbWF4TGV2ZWwpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYXJhY3RlckNvdW50OyBpICs9IDEpIHtcbiAgICBjaGFyYWN0ZXJzLnB1c2gocGxheWVyR2VuZXJhdG9yLm5leHQoKS52YWx1ZSk7XG4gIH1cbiAgcmV0dXJuIG5ldyBUZWFtKGNoYXJhY3RlcnMpO1xufVxuIiwiLyoqXG4gKiBFbnRyeSBwb2ludCBvZiBhcHA6IGRvbid0IGNoYW5nZSB0aGlzXG4gKi9cbmltcG9ydCBHYW1lUGxheSBmcm9tICcuL0dhbWVQbGF5JztcbmltcG9ydCBHYW1lQ29udHJvbGxlciBmcm9tICcuL0dhbWVDb250cm9sbGVyJztcbmltcG9ydCBHYW1lU3RhdGVTZXJ2aWNlIGZyb20gJy4vR2FtZVN0YXRlU2VydmljZSc7XG5cbmNvbnN0IGdhbWVQbGF5ID0gbmV3IEdhbWVQbGF5KCk7XG5nYW1lUGxheS5iaW5kVG9ET00oZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2dhbWUtY29udGFpbmVyJykpO1xuXG5jb25zdCBzdGF0ZVNlcnZpY2UgPSBuZXcgR2FtZVN0YXRlU2VydmljZShsb2NhbFN0b3JhZ2UpO1xuY29uc3QgZ2FtZUN0cmwgPSBuZXcgR2FtZUNvbnRyb2xsZXIoZ2FtZVBsYXksIHN0YXRlU2VydmljZSk7XG5nYW1lQ3RybC5pbml0KCk7XG5cbi8vIGRvbid0IHdyaXRlIHlvdXIgY29kZSBoZXJlXG4iLCJpbXBvcnQgTW9kYWxQb3B1cCBmcm9tICcuL01vZGFsUG9wdXAnO1xuaW1wb3J0IHsgY2FsY0hlYWx0aExldmVsLCBjYWxjVGlsZVR5cGUgfSBmcm9tICcuL3V0aWxzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZVBsYXkge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmJvYXJkU2l6ZSA9IDg7XG4gICAgdGhpcy5jb250YWluZXIgPSBudWxsO1xuICAgIHRoaXMuYm9hcmRFbCA9IG51bGw7XG4gICAgdGhpcy5jZWxscyA9IFtdO1xuICAgIHRoaXMuY2VsbENsaWNrTGlzdGVuZXJzID0gW107XG4gICAgdGhpcy5jZWxsRW50ZXJMaXN0ZW5lcnMgPSBbXTtcbiAgICB0aGlzLmNlbGxMZWF2ZUxpc3RlbmVycyA9IFtdO1xuICAgIHRoaXMubmV3R2FtZUxpc3RlbmVycyA9IFtdO1xuICAgIHRoaXMuc2F2ZUdhbWVMaXN0ZW5lcnMgPSBbXTtcbiAgICB0aGlzLmxvYWRHYW1lTGlzdGVuZXJzID0gW107XG4gICAgdGhpcy5pc01vZGFsID0gZmFsc2U7XG5cbiAgICB0aGlzLmluaXRNb2RhbExpc3RlbmVyKCk7XG4gIH1cblxuICBiaW5kVG9ET00oY29udGFpbmVyKSB7XG4gICAgaWYgKCEoY29udGFpbmVyIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvbnRhaW5lciBpcyBub3QgSFRNTEVsZW1lbnQnKTtcbiAgICB9XG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gIH1cblxuICBpbml0TW9kYWxMaXN0ZW5lcigpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIGUudGFyZ2V0LmRhdGFzZXQuaGFuZGxlciA9PT0gJ21vZGFsSGFuZGxlckNhbmNlbCdcbiAgICAgICAgJiYgdGhpcy5jdXJyZW50TW9kYWxcbiAgICAgICkge1xuICAgICAgICB0aGlzLmN1cnJlbnRNb2RhbC5oaWRlKCk7XG4gICAgICAgIHRoaXMuaXNNb2RhbCA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYXdzIGJvYXJkRWwgd2l0aCBzcGVjaWZpYyB0aGVtZVxuICAgKlxuICAgKiBAcGFyYW0gdGhlbWVcbiAgICovXG4gIGRyYXdVaSh0aGVtZSkge1xuICAgIHRoaXMuY2hlY2tCaW5kaW5nKCk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5pbm5lckhUTUwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwiY29udHJvbHNcIj5cbiAgICAgICAgPGJ1dHRvbiBkYXRhLWlkPVwiYWN0aW9uLXJlc3RhcnRcIiBjbGFzcz1cImJ0blwiPk5ldyBHYW1lPC9idXR0b24+XG4gICAgICAgIDxidXR0b24gZGF0YS1pZD1cImFjdGlvbi1zYXZlXCIgY2xhc3M9XCJidG5cIj5TYXZlIEdhbWU8L2J1dHRvbj5cbiAgICAgICAgPGJ1dHRvbiBkYXRhLWlkPVwiYWN0aW9uLWxvYWRcIiBjbGFzcz1cImJ0blwiPkxvYWQgR2FtZTwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiYm9hcmQtY29udGFpbmVyXCI+XG4gICAgICAgIDxkaXYgZGF0YS1pZD1cImJvYXJkXCIgY2xhc3M9XCJib2FyZFwiPjwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgYDtcblxuICAgIHRoaXMubmV3R2FtZUVsID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9YWN0aW9uLXJlc3RhcnRdJyk7XG4gICAgdGhpcy5zYXZlR2FtZUVsID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9YWN0aW9uLXNhdmVdJyk7XG4gICAgdGhpcy5sb2FkR2FtZUVsID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9YWN0aW9uLWxvYWRdJyk7XG5cbiAgICB0aGlzLm5ld0dhbWVFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4gdGhpcy5vbk5ld0dhbWVDbGljayhldmVudCkpO1xuICAgIHRoaXMuc2F2ZUdhbWVFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4gdGhpcy5vblNhdmVHYW1lQ2xpY2soZXZlbnQpKTtcbiAgICB0aGlzLmxvYWRHYW1lRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHRoaXMub25Mb2FkR2FtZUNsaWNrKGV2ZW50KSk7XG5cbiAgICB0aGlzLmJvYXJkRWwgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pZD1ib2FyZF0nKTtcbiAgICB0aGlzLmJvYXJkRWwuY2xhc3NMaXN0LmFkZCh0aGVtZSk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmJvYXJkU2l6ZSAqKiAyOyBpICs9IDEpIHtcbiAgICAgIGNvbnN0IGNlbGxFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY2VsbEVsLmNsYXNzTGlzdC5hZGQoXG4gICAgICAgICdjZWxsJyxcbiAgICAgICAgJ21hcC10aWxlJyxcbiAgICAgICAgYG1hcC10aWxlLSR7Y2FsY1RpbGVUeXBlKGksIHRoaXMuYm9hcmRTaXplKX1gLFxuICAgICAgKTtcbiAgICAgIGNlbGxFbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKGV2ZW50KSA9PiB0aGlzLm9uQ2VsbEVudGVyKGV2ZW50KSk7XG4gICAgICBjZWxsRWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIChldmVudCkgPT4gdGhpcy5vbkNlbGxMZWF2ZShldmVudCkpO1xuICAgICAgY2VsbEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB0aGlzLm9uQ2VsbENsaWNrKGV2ZW50KSk7XG4gICAgICB0aGlzLmJvYXJkRWwuYXBwZW5kQ2hpbGQoY2VsbEVsKTtcbiAgICB9XG5cbiAgICB0aGlzLmNlbGxzID0gQXJyYXkuZnJvbSh0aGlzLmJvYXJkRWwuY2hpbGRyZW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYXdzIHBvc2l0aW9ucyAod2l0aCBjaGFycykgb24gYm9hcmRFbFxuICAgKlxuICAgKiBAcGFyYW0gcG9zaXRpb25zIGFycmF5IG9mIFBvc2l0aW9uZWRDaGFyYWN0ZXIgb2JqZWN0c1xuICAgKi9cbiAgcmVkcmF3UG9zaXRpb25zKHBvc2l0aW9ucykge1xuICAgIGZvciAoY29uc3QgY2VsbCBvZiB0aGlzLmNlbGxzKSB7XG4gICAgICBjZWxsLmlubmVySFRNTCA9ICcnO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgcG9zaXRpb24gb2YgcG9zaXRpb25zKSB7XG4gICAgICBjb25zdCBjZWxsRWwgPSB0aGlzLmJvYXJkRWwuY2hpbGRyZW5bcG9zaXRpb24ucG9zaXRpb25dO1xuICAgICAgY29uc3QgY2hhckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBjaGFyRWwuY2xhc3NMaXN0LmFkZCgnY2hhcmFjdGVyJywgcG9zaXRpb24uY2hhcmFjdGVyLnR5cGUpO1xuXG4gICAgICBjb25zdCBoZWFsdGhFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgaGVhbHRoRWwuY2xhc3NMaXN0LmFkZCgnaGVhbHRoLWxldmVsJyk7XG5cbiAgICAgIGNvbnN0IGhlYWx0aEluZGljYXRvckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBoZWFsdGhJbmRpY2F0b3JFbC5jbGFzc0xpc3QuYWRkKFxuICAgICAgICAnaGVhbHRoLWxldmVsLWluZGljYXRvcicsXG4gICAgICAgIGBoZWFsdGgtbGV2ZWwtaW5kaWNhdG9yLSR7Y2FsY0hlYWx0aExldmVsKHBvc2l0aW9uLmNoYXJhY3Rlci5oZWFsdGgpfWAsXG4gICAgICApO1xuICAgICAgaGVhbHRoSW5kaWNhdG9yRWwuc3R5bGUud2lkdGggPSBgJHtwb3NpdGlvbi5jaGFyYWN0ZXIuaGVhbHRofSVgO1xuICAgICAgaGVhbHRoRWwuYXBwZW5kQ2hpbGQoaGVhbHRoSW5kaWNhdG9yRWwpO1xuICAgICAgY2hhckVsLmFwcGVuZENoaWxkKGhlYWx0aEVsKTtcbiAgICAgIGNlbGxFbC5hcHBlbmRDaGlsZChjaGFyRWwpO1xuICAgIH1cbiAgfVxuXG4gIHNob3dNb2RhbChtZXNzYWdlLCB1bmljb2RlKSB7XG4gICAgY29uc3QgbW9kYWwgPSBuZXcgTW9kYWxQb3B1cCh7XG4gICAgICB0aXRsZTogbWVzc2FnZSxcbiAgICAgIGNvbnRlbnQ6IGAmIyR7dW5pY29kZX1gLFxuICAgICAgZm9vdGVyQnV0dG9uczogW1xuICAgICAgICB7XG4gICAgICAgICAgY2xhc3M6ICdidG4gYnRuX19jYW5jZWwnLFxuICAgICAgICAgIHRleHQ6ICdDbG9zZScsXG4gICAgICAgICAgaGFuZGxlcjogJ21vZGFsSGFuZGxlckNhbmNlbCcsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0pO1xuXG4gICAgdGhpcy5jdXJyZW50TW9kYWwgPSBtb2RhbDtcblxuICAgIG1vZGFsLnNob3coKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgbGlzdGVuZXIgdG8gbW91c2UgZW50ZXIgZm9yIGNlbGxcbiAgICpcbiAgICogQHBhcmFtIGNhbGxiYWNrXG4gICAqL1xuICBhZGRDZWxsRW50ZXJMaXN0ZW5lcihjYWxsYmFjaykge1xuICAgIHRoaXMuY2VsbEVudGVyTGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBsaXN0ZW5lciB0byBtb3VzZSBsZWF2ZSBmb3IgY2VsbFxuICAgKlxuICAgKiBAcGFyYW0gY2FsbGJhY2tcbiAgICovXG4gIGFkZENlbGxMZWF2ZUxpc3RlbmVyKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5jZWxsTGVhdmVMaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGxpc3RlbmVyIHRvIG1vdXNlIGNsaWNrIGZvciBjZWxsXG4gICAqXG4gICAqIEBwYXJhbSBjYWxsYmFja1xuICAgKi9cbiAgYWRkQ2VsbENsaWNrTGlzdGVuZXIoY2FsbGJhY2spIHtcbiAgICB0aGlzLmNlbGxDbGlja0xpc3RlbmVycy5wdXNoKGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgbGlzdGVuZXIgdG8gXCJOZXcgR2FtZVwiIGJ1dHRvbiBjbGlja1xuICAgKlxuICAgKiBAcGFyYW0gY2FsbGJhY2tcbiAgICovXG4gIGFkZE5ld0dhbWVMaXN0ZW5lcihjYWxsYmFjaykge1xuICAgIHRoaXMubmV3R2FtZUxpc3RlbmVycy5wdXNoKGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgbGlzdGVuZXIgdG8gXCJTYXZlIEdhbWVcIiBidXR0b24gY2xpY2tcbiAgICpcbiAgICogQHBhcmFtIGNhbGxiYWNrXG4gICAqL1xuICBhZGRTYXZlR2FtZUxpc3RlbmVyKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5zYXZlR2FtZUxpc3RlbmVycy5wdXNoKGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgbGlzdGVuZXIgdG8gXCJMb2FkIEdhbWVcIiBidXR0b24gY2xpY2tcbiAgICpcbiAgICogQHBhcmFtIGNhbGxiYWNrXG4gICAqL1xuICBhZGRMb2FkR2FtZUxpc3RlbmVyKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5sb2FkR2FtZUxpc3RlbmVycy5wdXNoKGNhbGxiYWNrKTtcbiAgfVxuXG4gIG9uQ2VsbEVudGVyKGV2ZW50KSB7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmNlbGxzLmluZGV4T2YoZXZlbnQuY3VycmVudFRhcmdldCk7XG4gICAgdGhpcy5jZWxsRW50ZXJMaXN0ZW5lcnMuZm9yRWFjaCgobykgPT4gby5jYWxsKG51bGwsIGluZGV4KSk7XG4gIH1cblxuICBvbkNlbGxMZWF2ZShldmVudCkge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5jZWxscy5pbmRleE9mKGV2ZW50LmN1cnJlbnRUYXJnZXQpO1xuICAgIHRoaXMuY2VsbExlYXZlTGlzdGVuZXJzLmZvckVhY2goKG8pID0+IG8uY2FsbChudWxsLCBpbmRleCkpO1xuICB9XG5cbiAgb25DZWxsQ2xpY2soZXZlbnQpIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuY2VsbHMuaW5kZXhPZihldmVudC5jdXJyZW50VGFyZ2V0KTtcbiAgICB0aGlzLmNlbGxDbGlja0xpc3RlbmVycy5mb3JFYWNoKChvKSA9PiBvLmNhbGwobnVsbCwgaW5kZXgpKTtcbiAgfVxuXG4gIG9uTmV3R2FtZUNsaWNrKCkge1xuICAgIHRoaXMubmV3R2FtZUxpc3RlbmVycy5mb3JFYWNoKChvKSA9PiBvLmNhbGwobnVsbCkpO1xuICB9XG5cbiAgb25TYXZlR2FtZUNsaWNrKCkge1xuICAgIHRoaXMuc2F2ZUdhbWVMaXN0ZW5lcnMuZm9yRWFjaCgobykgPT4gby5jYWxsKG51bGwpKTtcbiAgfVxuXG4gIG9uTG9hZEdhbWVDbGljaygpIHtcbiAgICB0aGlzLmxvYWRHYW1lTGlzdGVuZXJzLmZvckVhY2goKG8pID0+IG8uY2FsbChudWxsKSk7XG4gIH1cblxuICBzaG93TW9kYWxNZXNzYWdlKG1lc3NhZ2UsIHVuaWNvZGUpIHtcbiAgICBpZiAoIXRoaXMuaXNNb2RhbCkge1xuICAgICAgdGhpcy5pc01vZGFsID0gdHJ1ZTtcbiAgICAgIHRoaXMuc2hvd01vZGFsKG1lc3NhZ2UsIHVuaWNvZGUpO1xuICAgIH1cbiAgfVxuXG4gIHNlbGVjdENlbGwoaW5kZXgsIGNvbG9yID0gJ3llbGxvdycpIHtcbiAgICB0aGlzLmRlc2VsZWN0Q2VsbChpbmRleCk7XG4gICAgdGhpcy5jZWxsc1tpbmRleF0uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnLCBgc2VsZWN0ZWQtJHtjb2xvcn1gKTtcbiAgfVxuXG4gIGRlc2VsZWN0Q2VsbChpbmRleCkge1xuICAgIGNvbnN0IGNlbGwgPSB0aGlzLmNlbGxzW2luZGV4XTtcblxuICAgIGlmIChjZWxsKSB7XG4gICAgICBjZWxsLmNsYXNzTGlzdC5yZW1vdmUoXG4gICAgICAgIC4uLkFycmF5LmZyb20oY2VsbC5jbGFzc0xpc3QpLmZpbHRlcigobykgPT4gby5zdGFydHNXaXRoKCdzZWxlY3RlZCcpKSxcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgc2hvd0NlbGxUb29sdGlwKG1lc3NhZ2UsIGluZGV4KSB7XG4gICAgdGhpcy5jZWxsc1tpbmRleF0udGl0bGUgPSBtZXNzYWdlO1xuICB9XG5cbiAgaGlkZUNlbGxUb29sdGlwKGluZGV4KSB7XG4gICAgdGhpcy5jZWxsc1tpbmRleF0udGl0bGUgPSAnJztcbiAgfVxuXG4gIHNob3dEYW1hZ2UoaW5kZXgsIGRhbWFnZSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgY29uc3QgY2VsbCA9IHRoaXMuY2VsbHNbaW5kZXhdO1xuICAgICAgY29uc3QgZGFtYWdlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICBkYW1hZ2VFbC5jbGFzc05hbWUgPSAnZGFtYWdlJztcbiAgICAgIGRhbWFnZUVsLnRleHRDb250ZW50ID0gZGFtYWdlO1xuICAgICAgY2VsbC5hcHBlbmRDaGlsZChkYW1hZ2VFbCk7XG5cbiAgICAgIGRhbWFnZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsICgpID0+IHtcbiAgICAgICAgY2VsbC5yZW1vdmVDaGlsZChkYW1hZ2VFbCk7XG4gICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHNldEN1cnNvcihjdXJzb3IpIHtcbiAgICB0aGlzLmJvYXJkRWwuc3R5bGUuY3Vyc29yID0gY3Vyc29yO1xuICB9XG5cbiAgY2hlY2tCaW5kaW5nKCkge1xuICAgIGlmICh0aGlzLmNvbnRhaW5lciA9PT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdHYW1lUGxheSBub3QgYmluZCB0byBET00nKTtcbiAgICB9XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVTdGF0ZVNlcnZpY2Uge1xuICBjb25zdHJ1Y3RvcihzdG9yYWdlKSB7XG4gICAgdGhpcy5zdG9yYWdlID0gc3RvcmFnZTtcbiAgfVxuXG4gIHNhdmUoc3RhdGUpIHtcbiAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbSgnc3RhdGUnLCBKU09OLnN0cmluZ2lmeShzdGF0ZSkpO1xuICB9XG5cbiAgbG9hZCgpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UodGhpcy5zdG9yYWdlLmdldEl0ZW0oJ3N0YXRlJykpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzdGF0ZScpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHRoZW1lcyBmcm9tICcuL3RoZW1lcyc7XG5pbXBvcnQgR2FtZVN0YXRlIGZyb20gJy4vR2FtZVN0YXRlJztcbmltcG9ydCBjdXJzb3JzIGZyb20gJy4vY3Vyc29ycyc7XG5pbXBvcnQgZ2V0VHJhbnNpdGlvbkF0dGFja0NlbGxzIGZyb20gJy4vdHJhbnNpdGlvbkF0dGFja0NlbGxzJztcbmltcG9ydCBjcmVhdGVQb3NpdGlvbnNDaGFyLCB7XG4gIGNob29zZVJhbmRQb3NpdGlvbnMsXG4gIHJlc3RvcmVDaGFyLFxufSBmcm9tICcuL2NyZWF0ZVBvc2l0aW9ucyc7XG5pbXBvcnQge1xuICBjYWxjdWxhdGVEYW1hZ2UsXG4gIGdldEluZm8sXG4gIGdldFJhbmRvbUNoYXJhY3RlcixcbiAgb3ZlcndyaXRlUHJvcGVydGllcyxcbiAgcmVzdG9yZUNoYXJhY3RlcnMsXG59IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IEJvd21hbiBmcm9tICcuL2NoYXJhY3RlcnMvQm93bWFuJztcbmltcG9ydCBTd29yZHNtYW4gZnJvbSAnLi9jaGFyYWN0ZXJzL1N3b3Jkc21hbic7XG5pbXBvcnQgTWFnaWNpYW4gZnJvbSAnLi9jaGFyYWN0ZXJzL01hZ2ljaWFuJztcbmltcG9ydCBWYW1waXJlIGZyb20gJy4vY2hhcmFjdGVycy9WYW1waXJlJztcbmltcG9ydCBEYWVtb24gZnJvbSAnLi9jaGFyYWN0ZXJzL0RhZW1vbic7XG5pbXBvcnQgVW5kZWFkIGZyb20gJy4vY2hhcmFjdGVycy9VbmRlYWQnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lQ29udHJvbGxlciB7XG4gIGNvbnN0cnVjdG9yKGdhbWVQbGF5LCBzdGF0ZVNlcnZpY2UpIHtcbiAgICB0aGlzLmdhbWVQbGF5ID0gZ2FtZVBsYXk7XG4gICAgdGhpcy5zdGF0ZVNlcnZpY2UgPSBzdGF0ZVNlcnZpY2U7XG4gICAgdGhpcy5nYW1lU3RhdGUgPSBuZXcgR2FtZVN0YXRlKHRoaXMuZ2FtZVBsYXkpO1xuXG4gICAgdGhpcy5vbkNlbGxDbGljayA9IHRoaXMub25DZWxsQ2xpY2suYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uQ2VsbEVudGVyID0gdGhpcy5vbkNlbGxFbnRlci5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25DZWxsTGVhdmUgPSB0aGlzLm9uQ2VsbExlYXZlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5uZXdHYW1lID0gdGhpcy5uZXdHYW1lLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zYXZlR2FtZSA9IHRoaXMuc2F2ZUdhbWUuYmluZCh0aGlzKTtcbiAgICB0aGlzLmxvYWRHYW1lID0gdGhpcy5sb2FkR2FtZS5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5ldmVudHMoKTtcbiAgfVxuXG4gIGluaXQoKSB7XG4gICAgLy8gVE9ETzogYWRkIGV2ZW50IGxpc3RlbmVycyB0byBnYW1lUGxheSBldmVudHNcbiAgICAvLyBUT0RPOiBsb2FkIHNhdmVkIHN0YXRlZCBmcm9tIHN0YXRlU2VydmljZVxuICAgIHRoaXMuaW5pdE5ld1RlYW1zKCk7XG4gICAgdGhpcy51cGRhdGVQaWN0dXJlKCk7XG4gIH1cblxuICBldmVudHMoKSB7XG4gICAgdGhpcy5nYW1lUGxheS5hZGRDZWxsRW50ZXJMaXN0ZW5lcih0aGlzLm9uQ2VsbEVudGVyKTtcbiAgICB0aGlzLmdhbWVQbGF5LmFkZENlbGxMZWF2ZUxpc3RlbmVyKHRoaXMub25DZWxsTGVhdmUpO1xuICAgIHRoaXMuZ2FtZVBsYXkuYWRkQ2VsbENsaWNrTGlzdGVuZXIodGhpcy5vbkNlbGxDbGljayk7XG4gICAgdGhpcy5nYW1lUGxheS5hZGROZXdHYW1lTGlzdGVuZXIodGhpcy5uZXdHYW1lKTtcbiAgICB0aGlzLmdhbWVQbGF5LmFkZFNhdmVHYW1lTGlzdGVuZXIodGhpcy5zYXZlR2FtZSk7XG4gICAgdGhpcy5nYW1lUGxheS5hZGRMb2FkR2FtZUxpc3RlbmVyKHRoaXMubG9hZEdhbWUpO1xuICB9XG5cbiAgbmV3R2FtZSgpIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgbGV2ZWxHYW1lOiAxLFxuICAgICAgY291bnRDbGljazogMCxcbiAgICAgIGhpc3Rvcnk6IFtcbiAgICAgICAgLi4udGhpcy5nYW1lU3RhdGUuaGlzdG9yeSxcbiAgICAgICAge1xuICAgICAgICAgIGxldmVsR2FtZTogdGhpcy5nYW1lU3RhdGUubGV2ZWxHYW1lLFxuICAgICAgICAgIHBvaW50czogdGhpcy5nYW1lU3RhdGUucG9pbnRzLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIGlzTW92ZTogJ3VzZXInLFxuICAgICAgYmxvY2s6IGZhbHNlLFxuICAgICAgcG9pbnRzOiAwLFxuICAgIH07XG5cbiAgICBvdmVyd3JpdGVQcm9wZXJ0aWVzKHRoaXMuZ2FtZVN0YXRlLCBkYXRhKTtcblxuICAgIHRoaXMucmVzZXQoKTtcbiAgICB0aGlzLmluaXQoKTtcbiAgfVxuXG4gIHNhdmVHYW1lKCkge1xuICAgIHRoaXMuZ2FtZVN0YXRlLmF0dGFja0NlbGxzID0gW107XG4gICAgdGhpcy5nYW1lU3RhdGUudHJhbnNpdGlvbkNlbGxzID0gW107XG4gICAgdGhpcy5nYW1lU3RhdGUuYWN0aXZlQ2hhclVzZXIgPSBudWxsO1xuICAgIHRoaXMuc3RhdGVTZXJ2aWNlLnNhdmUodGhpcy5nYW1lU3RhdGUpO1xuICAgIHRoaXMuZ2FtZVBsYXkuc2hvd01vZGFsTWVzc2FnZSgnWW91ciBnYW1lIGhhcyBzYXZlZCEnLCAnOTk5NycpO1xuICB9XG5cbiAgbG9hZEdhbWUoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNhdmVkR2FtZVN0YXRlID0gdGhpcy5zdGF0ZVNlcnZpY2UubG9hZCgpO1xuICAgICAgdGhpcy5yZXN0b3JlR2FtZVN0YXRlKHNhdmVkR2FtZVN0YXRlKTtcbiAgICAgIHRoaXMucmVzdG9yZUFjdGl2ZUNoYXJhY3RlcihzYXZlZEdhbWVTdGF0ZS5hY3RpdmVDaGFyKTtcbiAgICAgIHRoaXMudXBkYXRlUGljdHVyZSgpO1xuICAgICAgdGhpcy5zaG93R2FtZUluZm8oKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aGlzLmhhbmRsZUxvYWRpbmdFcnJvcigpO1xuICAgIH1cbiAgfVxuXG4gIHJlc3RvcmVHYW1lU3RhdGUoc2F2ZWRTdGF0ZSkge1xuICAgIGNvbnN0IHtcbiAgICAgIGxldmVsR2FtZSxcbiAgICAgIGNvdW50Q2xpY2ssXG4gICAgICBoaXN0b3J5LFxuICAgICAgaXNNb3ZlLFxuICAgICAgYmxvY2ssXG4gICAgICBwb2ludHMsXG4gICAgICBpbmRleFNlbGVjdCxcbiAgICB9ID0gc2F2ZWRTdGF0ZTtcblxuICAgIG92ZXJ3cml0ZVByb3BlcnRpZXModGhpcy5nYW1lU3RhdGUsIHtcbiAgICAgIGxldmVsR2FtZTogYmxvY2sgPyBsZXZlbEdhbWUgLSAxIDogbGV2ZWxHYW1lLFxuICAgICAgY291bnRDbGljayxcbiAgICAgIGhpc3RvcnksXG4gICAgICBpc01vdmUsXG4gICAgICBibG9jayxcbiAgICAgIHBvaW50cyxcbiAgICAgIGluZGV4U2VsZWN0LFxuICAgIH0pO1xuXG4gICAgdGhpcy5yZXNldFRlYW1zKHNhdmVkU3RhdGUpO1xuICB9XG5cbiAgcmVzdG9yZUFjdGl2ZUNoYXJhY3RlcihzYXZlZEFjdGl2ZUNoYXIpIHtcbiAgICBjb25zdCByZXN0YXJ0ZWRBY3RpdmVDaGFyID0gcmVzdG9yZUNoYXIoc2F2ZWRBY3RpdmVDaGFyKTtcbiAgICBpZiAocmVzdGFydGVkQWN0aXZlQ2hhciAmJiByZXN0YXJ0ZWRBY3RpdmVDaGFyLmlzTW92ZSA9PT0gJ3VzZXInKSB7XG4gICAgICB0aGlzLnJlYWN0T25DbGljayhyZXN0YXJ0ZWRBY3RpdmVDaGFyLCBbXG4gICAgICAgICdib3dtYW4nLFxuICAgICAgICAnc3dvcmRzbWFuJyxcbiAgICAgICAgJ21hZ2ljaWFuJyxcbiAgICAgIF0pO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZUxvYWRpbmdFcnJvcigpIHtcbiAgICB0aGlzLmdhbWVQbGF5LnNob3dNb2RhbE1lc3NhZ2UoXCJUaGVyZSdzIG5vIGdhbWUgaW4gbWVtb3J5XCIsICcxMjgwNzUnKTtcbiAgICB0aGlzLm5ld0dhbWUoKTtcbiAgfVxuXG4gIGluaXROZXdUZWFtcygpIHtcbiAgICB0aGlzLmdhbWVTdGF0ZS51c2VyVGVhbSA9IHRoaXMuZ2V0VXNlclRlYW0oW1xuICAgICAgdGhpcy5nYW1lU3RhdGUubGV2ZWxHYW1lLFxuICAgICAgdGhpcy5nYW1lU3RhdGUubGV2ZWxHYW1lLFxuICAgIF0pO1xuICAgIHRoaXMuZ2FtZVN0YXRlLmNvbXBUZWFtID0gdGhpcy5nZXRDb21wVGVhbShbXG4gICAgICB0aGlzLmdhbWVTdGF0ZS5sZXZlbEdhbWUsXG4gICAgICB0aGlzLmdhbWVTdGF0ZS5sZXZlbEdhbWUsXG4gICAgXSk7XG4gIH1cblxuICBnZXRVc2VyVGVhbShbbWF4TGV2ZWwsIGNoYXJDb3VudF0pIHtcbiAgICBjb25zdCB1c2VyVHlwZXMgPSBbQm93bWFuLCBTd29yZHNtYW4sIE1hZ2ljaWFuXTtcbiAgICBjb25zdCB1c2VyVGVhbSA9IGNyZWF0ZVBvc2l0aW9uc0NoYXIoXG4gICAgICB1c2VyVHlwZXMsXG4gICAgICB0aGlzLmdhbWVQbGF5LmJvYXJkU2l6ZSxcbiAgICAgIGZhbHNlLFxuICAgICAgW21heExldmVsLCBjaGFyQ291bnRdLFxuICAgICk7XG4gICAgdGhpcy5nYW1lU3RhdGUudXNlclRlYW0gPSB1c2VyVGVhbTtcbiAgICByZXR1cm4gdXNlclRlYW07XG4gIH1cblxuICBnZXRDb21wVGVhbShbbWF4TGV2ZWwsIGNoYXJDb3VudF0pIHtcbiAgICBjb25zdCBjb21wVHlwZXMgPSBbVmFtcGlyZSwgRGFlbW9uLCBVbmRlYWRdO1xuICAgIGNvbnN0IGNvbXBUZWFtID0gY3JlYXRlUG9zaXRpb25zQ2hhcihcbiAgICAgIGNvbXBUeXBlcyxcbiAgICAgIHRoaXMuZ2FtZVBsYXkuYm9hcmRTaXplLFxuICAgICAgdHJ1ZSxcbiAgICAgIFttYXhMZXZlbCwgY2hhckNvdW50XSxcbiAgICApO1xuICAgIHRoaXMuZ2FtZVN0YXRlLmNvbXBUZWFtID0gY29tcFRlYW07XG4gICAgcmV0dXJuIGNvbXBUZWFtO1xuICB9XG5cbiAgcmVzZXRUZWFtcyhnYW1lU3RhdGUpIHtcbiAgICB0aGlzLmdhbWVTdGF0ZS51c2VyVGVhbSA9IHJlc3RvcmVDaGFyYWN0ZXJzKFxuICAgICAgZ2FtZVN0YXRlLnVzZXJUZWFtLFxuICAgICAgcmVzdG9yZUNoYXIsXG4gICAgKTtcbiAgICB0aGlzLmdhbWVTdGF0ZS5jb21wVGVhbSA9IHJlc3RvcmVDaGFyYWN0ZXJzKFxuICAgICAgZ2FtZVN0YXRlLmNvbXBUZWFtLFxuICAgICAgcmVzdG9yZUNoYXIsXG4gICAgKTtcbiAgfVxuXG4gIGxldmVsVXAoKSB7XG4gICAgY29uc3QgdGhlbWVWYWx1ZXMgPSBPYmplY3QudmFsdWVzKHRoZW1lcyk7XG5cbiAgICB0aGlzLnVwZGF0ZVRlYW1zKCk7XG4gICAgdGhpcy5nYW1lU3RhdGUuZ2V0QWxsUGxheWVyKCkuZm9yRWFjaCgocGxheWVyKSA9PiBwbGF5ZXIuY2hhcmFjdGVyLmxldmVsVXAoKSk7XG4gICAgdGhpcy5nYW1lUGxheS5kcmF3VWkodGhlbWVWYWx1ZXNbKHRoaXMuZ2FtZVN0YXRlLmxldmVsR2FtZSAtIDEpICUgdGhlbWVWYWx1ZXMubGVuZ3RoXSk7XG4gICAgdGhpcy5nYW1lU3RhdGUuY291bnRDbGljayA9IDA7XG4gICAgdGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QgPSBudWxsO1xuICB9XG5cbiAgdXBkYXRlVGVhbXMoKSB7XG4gICAgY29uc3QgbmV3VXNlclRlYW0gPSB0aGlzLmdldFVzZXJUZWFtKFtcbiAgICAgIHRoaXMuZ2FtZVN0YXRlLmxldmVsR2FtZSAtIDEsXG4gICAgICB0aGlzLmdhbWVTdGF0ZS5sZXZlbEdhbWUsXG4gICAgXSk7XG4gICAgY29uc3QgYWxsU3RhcnRQb3NpdGlvbnMgPSBjaG9vc2VSYW5kUG9zaXRpb25zKHRoaXMuZ2FtZVBsYXkuYm9hcmRTaXplKTtcbiAgICBuZXdVc2VyVGVhbS5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICBhbGxTdGFydFBvc2l0aW9ucy5zcGxpY2UoYWxsU3RhcnRQb3NpdGlvbnMuaW5kZXhPZihpdGVtLnBvc2l0aW9uKSwgMSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmdhbWVTdGF0ZS51c2VyVGVhbVN1cnZpdm9ycy5mb3JFYWNoKChzdXJ2aXZvcikgPT4ge1xuICAgICAgaWYgKCFhbGxTdGFydFBvc2l0aW9ucy5pbmNsdWRlcyhzdXJ2aXZvci5wb3NpdGlvbikpIHtcbiAgICAgICAgY29uc3QgbmV3UG9zaXRpb24gPSBhbGxTdGFydFBvc2l0aW9uc1tcbiAgICAgICAgICBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhbGxTdGFydFBvc2l0aW9ucy5sZW5ndGgpXG4gICAgICAgIF07XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICBzdXJ2aXZvci5wb3NpdGlvbiA9IG5ld1Bvc2l0aW9uO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5nYW1lU3RhdGUudXNlclRlYW0gPSB0aGlzLmdhbWVTdGF0ZS51c2VyVGVhbVN1cnZpdm9ycy5jb25jYXQobmV3VXNlclRlYW0pO1xuICAgIHRoaXMuZ2FtZVN0YXRlLnVzZXJUZWFtU3Vydml2b3JzID0gW107XG4gICAgdGhpcy5nYW1lU3RhdGUuY29tcFRlYW0gPSB0aGlzLmdldENvbXBUZWFtKFtcbiAgICAgIHRoaXMuZ2FtZVN0YXRlLmxldmVsR2FtZSAtIDEsXG4gICAgICB0aGlzLmdhbWVTdGF0ZS51c2VyVGVhbS5sZW5ndGgsXG4gICAgXSk7XG4gIH1cblxuICBzaG93R2FtZUluZm8oKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IHRoaXMuZ2FtZVN0YXRlLnBvaW50c1xuICAgICAgPyBgWW91ciBsZXZlbCAke3RoaXMuZ2FtZVN0YXRlLmxldmVsR2FtZX0gYW5kIHBvaW50cyAke3RoaXMuZ2FtZVN0YXRlLnBvaW50c31gXG4gICAgICA6IFwiVGhlcmUncyBubyBwb2ludHMuIFxcbiBJdCdzIHRoZSBmaXJzdCByb3VuZFwiO1xuICAgIGNvbnN0IGljb25Db2RlID0gdGhpcy5nYW1lU3RhdGUucG9pbnRzID8gJzEyODA3NicgOiAnMTI4MDgzJztcblxuICAgIHRoaXMuZ2FtZVBsYXkuc2hvd01vZGFsTWVzc2FnZShtZXNzYWdlLCBpY29uQ29kZSk7XG4gIH1cblxuICBhc3luYyBvbkNlbGxDbGljayhpbmRleCkge1xuICAgIGlmICh0aGlzLmdhbWVTdGF0ZS5ibG9jaykgcmV0dXJuO1xuXG4gICAgY29uc3QgcGxheWVyID0gdGhpcy5nYW1lU3RhdGVcbiAgICAgIC5nZXRBbGxQbGF5ZXIoKVxuICAgICAgLmZpbmQoKGVsKSA9PiBlbC5wb3NpdGlvbiA9PT0gaW5kZXgpO1xuXG4gICAgaWYgKHRoaXMuZ2FtZVN0YXRlLmFjdGl2ZUNoYXIpIHtcbiAgICAgIGF3YWl0IHRoaXMuaGFuZGxlVXNlclR1cm4oaW5kZXgpO1xuICAgIH1cblxuICAgIHRoaXMucmVhY3RPbkNsaWNrKHBsYXllciwgWydib3dtYW4nLCAnc3dvcmRzbWFuJywgJ21hZ2ljaWFuJ10pO1xuXG4gICAgaWYgKHRoaXMuZ2FtZVN0YXRlLmNvdW50Q2xpY2sgPj0gMSkge1xuICAgICAgYXdhaXQgdGhpcy5oYW5kbGVDb21wdXRlclR1cm4oKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBoYW5kbGVVc2VyVHVybihpbmRleCkge1xuICAgIGlmICghdGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QpIHJldHVybjtcblxuICAgIGlmICh0aGlzLmdhbWVTdGF0ZS5pbmRleFNlbGVjdC5ncmVlbiA9PT0gaW5kZXgpIHtcbiAgICAgIHRoaXMuZ2FtZVN0YXRlLmFjdGl2ZUNoYXIucG9zaXRpb24gPSBpbmRleDtcbiAgICAgIHRoaXMuZ2FtZVN0YXRlLmNvdW50Q2xpY2sgKz0gMTtcbiAgICAgIHRoaXMuZ2FtZVBsYXkucmVkcmF3UG9zaXRpb25zKHRoaXMuZ2FtZVN0YXRlLmdldEFsbFBsYXllcigpKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QucmVkID09PSBpbmRleCkge1xuICAgICAgdGhpcy5nYW1lU3RhdGUuaXNNb3ZlID0gJ3VzZXInO1xuICAgICAgY29uc3QgcmVzcG9uc2VEb0RhbWFnZSA9IGF3YWl0IHRoaXMuZG9EYW1hZ2UoaW5kZXgpO1xuICAgICAgaWYgKHJlc3BvbnNlRG9EYW1hZ2UpIHtcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY291bnRDbGljayArPSAxO1xuICAgICAgICB0aGlzLmdhbWVQbGF5LnJlZHJhd1Bvc2l0aW9ucyh0aGlzLmdhbWVTdGF0ZS5nZXRBbGxQbGF5ZXIoKSk7XG4gICAgICAgIGF3YWl0IHRoaXMuY2hlY2tHYW1lUHJvZ3Jlc3MoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBjaGVja0dhbWVQcm9ncmVzcygpIHtcbiAgICBpZiAodGhpcy5nYW1lU3RhdGUuY29tcFRlYW0ubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLmdhbWVTdGF0ZS5sZXZlbEdhbWUgKz0gMTtcbiAgICAgIHRoaXMuZ2FtZVN0YXRlLnBvaW50cyArPSB0aGlzLmdhbWVTdGF0ZS5jYWxjdWxhdGVTdW1Qb2ludHMoKTtcbiAgICAgIHRoaXMucmVzZXQoKTtcblxuICAgICAgLy8gVW5jb21tZW50IHRoZSBmb2xsb3dpbmcgaWYgeW91IHdhbnQgdG8gaGFuZGxlIGdhbWUgZW5kaW5nXG4gICAgICAvLyBhd2FpdCB0aGlzLmNoZWNrR2FtZU92ZXIoKTtcblxuICAgICAgdGhpcy5nYW1lU3RhdGUudXNlclRlYW1TdXJ2aXZvcnMgPSB0aGlzLmdhbWVTdGF0ZS51c2VyVGVhbTtcbiAgICAgIHRoaXMuZ2FtZVBsYXkuc2hvd01vZGFsTWVzc2FnZShcbiAgICAgICAgYExldmVsIHVwISBZb3VyIGxldmVsICR7dGhpcy5nYW1lU3RhdGUubGV2ZWxHYW1lfSBhbmQgdG90YWwgcG9pbnRzIGFyZSAke3RoaXMuZ2FtZVN0YXRlLnBvaW50c31gLFxuICAgICAgICAnOTk5NicsXG4gICAgICApO1xuICAgICAgdGhpcy5sZXZlbFVwKCk7XG4gICAgICB0aGlzLmdhbWVQbGF5LnJlZHJhd1Bvc2l0aW9ucyh0aGlzLmdhbWVTdGF0ZS5nZXRBbGxQbGF5ZXIoKSk7XG4gICAgfVxuICB9XG5cbiAgLy8gVW5jb21tZW50IHRoZSBmb2xsb3dpbmcgaWYgeW91IHdhbnQgdG8gaGFuZGxlIGdhbWUgZW5kaW5nXG4gIC8vIGFzeW5jIGNoZWNrR2FtZU92ZXIoKSB7XG4gIC8vICAgaWYgKHRoaXMuZ2FtZVN0YXRlLmxldmVsR2FtZSA+PSA1KSB7XG4gIC8vICAgICB0aGlzLmdhbWVTdGF0ZS5wb2ludCA9IHRoaXMuZ2FtZVN0YXRlLmNhbGN1bGF0ZVN1bVBvaW50cygpO1xuICAvLyAgICAgdGhpcy5nYW1lU3RhdGUuYmxvY2sgPSB0cnVlO1xuICAvLyAgICAgdGhpcy5nYW1lUGxheS5yZWRyYXdQb3NpdGlvbnModGhpcy5nYW1lU3RhdGUuYWxsUGxheWVyKTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1sZW5cbiAgLy8gICAgIHRoaXMuZ2FtZVBsYXkuc2hvd01vZGFsTWVzc2FnZShgWW91IHdpbiEgWW91ciBwb2ludHMgYXJlICR7dGhpcy5nYW1lU3RhdGUucG9pbnR9YCwgJzEyNzg4MScpO1xuICAvLyAgICAgcmV0dXJuO1xuICAvLyAgIH1cbiAgLy8gfVxuXG4gIGFzeW5jIGhhbmRsZUNvbXB1dGVyVHVybigpIHtcbiAgICB0aGlzLmdhbWVTdGF0ZS5hY3RpdmVDaGFyVXNlciA9IHRoaXMuZ2FtZVN0YXRlLmFjdGl2ZUNoYXI7XG4gICAgdGhpcy5nYW1lU3RhdGUuaXNNb3ZlID0gJ2NvbXAnO1xuICAgIGNvbnN0IHJlc3BvbnNlRG9BdHRhY2tDb21wID0gYXdhaXQgdGhpcy5kb0F0dGFja0NvbXAodGhpcyk7XG4gICAgaWYgKHJlc3BvbnNlRG9BdHRhY2tDb21wKSB7XG4gICAgICB0aGlzLmdhbWVTdGF0ZS5jb3VudENsaWNrID0gMDtcbiAgICAgIHRoaXMuZ2FtZVN0YXRlLmlzTW92ZSA9ICd1c2VyJztcblxuICAgICAgaWYgKHRoaXMuZ2FtZVN0YXRlLmZpbmRQcmVzdW1lZERlY2Vhc2VkUGxheWVyKCkpIHtcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuYWN0aXZlQ2hhciA9IHRoaXMuZ2FtZVN0YXRlLmFjdGl2ZUNoYXJVc2VyO1xuICAgICAgICB0aGlzLnJlYWN0T25DbGljayh0aGlzLmdhbWVTdGF0ZS5hY3RpdmVDaGFyLCBbXG4gICAgICAgICAgJ2Jvd21hbicsXG4gICAgICAgICAgJ3N3b3Jkc21hbicsXG4gICAgICAgICAgJ21hZ2ljaWFuJyxcbiAgICAgICAgXSk7XG4gICAgICAgIHRoaXMuZ2FtZVBsYXkucmVkcmF3UG9zaXRpb25zKHRoaXMuZ2FtZVN0YXRlLmdldEFsbFBsYXllcigpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBvbkNlbGxFbnRlcihpbmRleCkge1xuICAgIGlmICh0aGlzLmdhbWVTdGF0ZS5ibG9jaykgcmV0dXJuO1xuXG4gICAgY29uc3QgcGxheWVyID0gdGhpcy5nYW1lU3RhdGUuZ2V0UGxheWVyKGluZGV4KTtcbiAgICBpZiAocGxheWVyKSB7XG4gICAgICB0aGlzLmdhbWVQbGF5LnNob3dDZWxsVG9vbHRpcChnZXRJbmZvKHBsYXllci5jaGFyYWN0ZXIpLCBpbmRleCk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmdhbWVTdGF0ZS5hY3RpdmVDaGFyKSByZXR1cm47XG5cbiAgICBjb25zdCBpc1RyYW5zaXRpb25DZWxsID0gdGhpcy5nYW1lU3RhdGUudHJhbnNpdGlvbkNlbGxzLmluY2x1ZGVzKGluZGV4KTtcbiAgICBjb25zdCBpc0F0dGFja0NlbGwgPSB0aGlzLmdhbWVTdGF0ZS5hdHRhY2tDZWxscy5pbmNsdWRlcyhpbmRleCk7XG4gICAgY29uc3QgaXNVc2VyQ2VsbCA9IHRoaXMuZ2FtZVN0YXRlLnVzZXJUZWFtLnNvbWUoXG4gICAgICAoaXRlbSkgPT4gaXRlbS5wb3NpdGlvbiA9PT0gaW5kZXgsXG4gICAgKTtcbiAgICBjb25zdCBpc0NvbXBDZWxsID0gdGhpcy5nYW1lU3RhdGUuY29tcFRlYW0uc29tZShcbiAgICAgIChpdGVtKSA9PiBpdGVtLnBvc2l0aW9uID09PSBpbmRleCxcbiAgICApO1xuXG4gICAgdGhpcy5nYW1lUGxheS5zZXRDdXJzb3IoY3Vyc29ycy5wb2ludGVyKTtcblxuICAgIGlmICh0aGlzLmdhbWVTdGF0ZS5pbmRleFNlbGVjdCkge1xuICAgICAgaWYgKGlzVHJhbnNpdGlvbkNlbGwgJiYgIWlzVXNlckNlbGwgJiYgIWlzQ29tcENlbGwpIHtcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QuZ3JlZW4gPSBpbmRleDtcbiAgICAgICAgdGhpcy5nYW1lUGxheS5zZWxlY3RDZWxsKGluZGV4LCAnZ3JlZW4nKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzQXR0YWNrQ2VsbCAmJiBpc0NvbXBDZWxsKSB7XG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmluZGV4U2VsZWN0LnJlZCA9IGluZGV4O1xuICAgICAgICB0aGlzLmdhbWVQbGF5LnNlbGVjdENlbGwoaW5kZXgsICdyZWQnKTtcbiAgICAgICAgdGhpcy5nYW1lUGxheS5zZXRDdXJzb3IoY3Vyc29ycy5jcm9zc2hhaXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG9uQ2VsbExlYXZlKGluZGV4KSB7XG4gICAgdGhpcy5nYW1lUGxheS5oaWRlQ2VsbFRvb2x0aXAoaW5kZXgpO1xuXG4gICAgaWYgKHRoaXMuZ2FtZVN0YXRlLmJsb2NrKSByZXR1cm47XG5cbiAgICBjb25zdCBoYXNTZWxlY3RlZEdyZWVuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlbGVjdGVkLWdyZWVuJyk7XG4gICAgY29uc3QgaXNBdHRhY2tDZWxsID0gdGhpcy5nYW1lU3RhdGUuYXR0YWNrQ2VsbHM/LmluY2x1ZGVzKGluZGV4KTtcbiAgICBjb25zdCBpc0NvbXBUZWFtUG9zaXRpb24gPSB0aGlzLmdhbWVTdGF0ZS5jb21wVGVhbS5zb21lKFxuICAgICAgKGl0ZW0pID0+IGl0ZW0ucG9zaXRpb24gPT09IGluZGV4LFxuICAgICk7XG5cbiAgICBpZiAoaGFzU2VsZWN0ZWRHcmVlbikge1xuICAgICAgdGhpcy5nYW1lUGxheS5kZXNlbGVjdENlbGwodGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QuZ3JlZW4pO1xuXG4gICAgICBpZiAoIWlzQXR0YWNrQ2VsbCAmJiBpc0NvbXBUZWFtUG9zaXRpb24pIHtcbiAgICAgICAgdGhpcy5nYW1lUGxheS5kZXNlbGVjdENlbGwodGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QuZ3JlZW4pO1xuICAgICAgICB0aGlzLmdhbWVQbGF5LnNldEN1cnNvcihjdXJzb3JzLm5vdGFsbG93ZWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0ZWQtcmVkJykpIHtcbiAgICAgIHRoaXMuZ2FtZVBsYXkuZGVzZWxlY3RDZWxsKHRoaXMuZ2FtZVN0YXRlLmluZGV4U2VsZWN0LnJlZCk7XG4gICAgfVxuICB9XG5cbiAgcmVhY3RPbkNsaWNrKHBsYXllciwgYXJyYXlUeXBlcykge1xuICAgIGlmICghcGxheWVyKSByZXR1cm47XG5cbiAgICBpZiAoYXJyYXlUeXBlcy5pbmNsdWRlcyhwbGF5ZXIuY2hhcmFjdGVyLnR5cGUpKSB7XG4gICAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkQ2VsbChwbGF5ZXIucG9zaXRpb24pO1xuICAgICAgdGhpcy5nYW1lUGxheS5zZWxlY3RDZWxsKHBsYXllci5wb3NpdGlvbik7XG5cbiAgICAgIHRoaXMuZ2FtZVN0YXRlLmFjdGl2ZUNoYXIgPSBwbGF5ZXI7XG4gICAgICBjb25zdCB7IG1heFJhbmdlLCBtYXhBdHRhY2sgfSA9IHBsYXllci5jaGFyYWN0ZXI7XG5cbiAgICAgIHRoaXMuZ2FtZVN0YXRlLnRyYW5zaXRpb25DZWxscyA9IGdldFRyYW5zaXRpb25BdHRhY2tDZWxscyhcbiAgICAgICAgcGxheWVyLnBvc2l0aW9uLFxuICAgICAgICB0aGlzLmdhbWVQbGF5LmJvYXJkU2l6ZSxcbiAgICAgICAgbWF4UmFuZ2UsXG4gICAgICApO1xuICAgICAgdGhpcy5nYW1lU3RhdGUuYXR0YWNrQ2VsbHMgPSBnZXRUcmFuc2l0aW9uQXR0YWNrQ2VsbHMoXG4gICAgICAgIHBsYXllci5wb3NpdGlvbixcbiAgICAgICAgdGhpcy5nYW1lUGxheS5ib2FyZFNpemUsXG4gICAgICAgIG1heEF0dGFjayxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaGFuZGxlSW52YWxpZFNlbGVjdGlvbihwbGF5ZXIucG9zaXRpb24pO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZVNlbGVjdGVkQ2VsbChudW0pIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLmdhbWVTdGF0ZS5pbmRleFNlbGVjdFxuICAgICAgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlbGVjdGVkLXllbGxvdycpXG4gICAgKSB7XG4gICAgICB0aGlzLmdhbWVQbGF5LmRlc2VsZWN0Q2VsbCh0aGlzLmdhbWVTdGF0ZS5pbmRleFNlbGVjdC55ZWxsb3cpO1xuICAgIH1cbiAgICB0aGlzLmdhbWVTdGF0ZS5pbmRleFNlbGVjdCA9IHsgeWVsbG93OiBudW0gfTtcbiAgfVxuXG4gIGhhbmRsZUludmFsaWRTZWxlY3Rpb24obnVtKSB7XG4gICAgY29uc3QgaXNTZWxlY3RlZCA9IHRoaXMuZ2FtZVN0YXRlLmluZGV4U2VsZWN0O1xuICAgIGNvbnN0IGlzTm90SW5BdHRhY2tDZWxscyA9ICF0aGlzLmdhbWVTdGF0ZS5hdHRhY2tDZWxscy5pbmNsdWRlcyhudW0pO1xuICAgIGNvbnN0IGlzQ29tcHV0ZXJUZWFtUG9zaXRpb24gPSB0aGlzLmdhbWVTdGF0ZS5jb21wVGVhbS5zb21lKFxuICAgICAgKGl0ZW0pID0+IGl0ZW0ucG9zaXRpb24gPT09IG51bSxcbiAgICApO1xuXG4gICAgaWYgKGlzU2VsZWN0ZWQgJiYgaXNOb3RJbkF0dGFja0NlbGxzICYmIGlzQ29tcHV0ZXJUZWFtUG9zaXRpb24pIHtcbiAgICAgIHRoaXMuZ2FtZVBsYXkuc2hvd01vZGFsTWVzc2FnZShcIkl0IGNhbid0IGJlIGRvbmVcIiwgJzk5NDAnKTtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLmdhbWVTdGF0ZS5hY3RpdmVDaGFyKSB7XG4gICAgICB0aGlzLmdhbWVQbGF5LnNob3dNb2RhbE1lc3NhZ2UoJ1RoaXMgaXNuYHQgeW91ciBjaGFyYWN0ZXInLCAnOTk5NScpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGRvRGFtYWdlKGluZGV4KSB7XG4gICAgY29uc3QgeyBhdHRhY2sgfSA9IHRoaXMuZ2FtZVN0YXRlLmFjdGl2ZUNoYXIuY2hhcmFjdGVyO1xuICAgIGNvbnN0IG9wcG9uZW50ID0gdGhpcy5nYW1lU3RhdGUuZ2V0UGxheWVyKGluZGV4KTtcbiAgICBjb25zdCB7IGRlZmVuY2UsIGhlYWx0aCB9ID0gb3Bwb25lbnQuY2hhcmFjdGVyO1xuXG4gICAgY29uc3QgZGFtYWdlID0gY2FsY3VsYXRlRGFtYWdlKGF0dGFjaywgZGVmZW5jZSk7XG4gICAgY29uc3QgcmVzcG9uc2VTaG93RGFtYWdlID0gYXdhaXQgdGhpcy5nYW1lUGxheS5zaG93RGFtYWdlKGluZGV4LCBkYW1hZ2UpO1xuXG4gICAgaWYgKHJlc3BvbnNlU2hvd0RhbWFnZSkge1xuICAgICAgb3Bwb25lbnQuY2hhcmFjdGVyLmhlYWx0aCA9IGhlYWx0aCAtIGRhbWFnZTtcbiAgICAgIHRoaXMuY2hlY2tIZWFsdGhSZW1vdmVEZWFkKG9wcG9uZW50KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGNoZWNrSGVhbHRoUmVtb3ZlRGVhZChwbGF5ZXIpIHtcbiAgICBpZiAocGxheWVyLmNoYXJhY3Rlci5oZWFsdGggPD0gMCkge1xuICAgICAgY29uc3QgaW5mbyA9IHRoaXMuZ2FtZVN0YXRlLmdldFByZXN1bWVkRGVjZWFzZWRQbGF5ZXJJbmZvKFxuICAgICAgICBwbGF5ZXIucG9zaXRpb24sXG4gICAgICApO1xuXG4gICAgICBpZiAoaW5mby5pbmRleCAhPT0gLTEpIHtcbiAgICAgICAgdGhpcy5nYW1lU3RhdGVbaW5mby50ZWFtS2V5XS5zcGxpY2UoaW5mby5pbmRleCwgMSk7XG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmluZGV4U2VsZWN0ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXNldCgpIHtcbiAgICBpZiAoIXRoaXMuZ2FtZVN0YXRlLmluZGV4U2VsZWN0KSByZXR1cm47XG5cbiAgICBPYmplY3Qua2V5cyh0aGlzLmdhbWVTdGF0ZS5pbmRleFNlbGVjdCkuZm9yRWFjaCgoY29sb3IpID0+IHtcbiAgICAgIHRoaXMuZ2FtZVBsYXkuZGVzZWxlY3RDZWxsKHRoaXMuZ2FtZVN0YXRlLmluZGV4U2VsZWN0W2NvbG9yXSk7XG4gICAgfSk7XG4gICAgdGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QgPSBudWxsO1xuICAgIHRoaXMuZ2FtZVBsYXkuc2V0Q3Vyc29yKGN1cnNvcnMuYXV0byk7XG4gIH1cblxuICB1cGRhdGVQaWN0dXJlKCkge1xuICAgIGNvbnN0IGxldmVsID0gdGhpcy5nYW1lU3RhdGUubGV2ZWxHYW1lID4gMCA/IHRoaXMuZ2FtZVN0YXRlLmxldmVsR2FtZSAtIDEgOiAwO1xuICAgIHRoaXMuZ2FtZVBsYXkuZHJhd1VpKE9iamVjdC52YWx1ZXModGhlbWVzKVtsZXZlbF0pO1xuICAgIHRoaXMuZ2FtZVBsYXkucmVkcmF3UG9zaXRpb25zKHRoaXMuZ2FtZVN0YXRlLmdldEFsbFBsYXllcigpKTtcblxuICAgIGlmICh0aGlzLmdhbWVTdGF0ZS5pbmRleFNlbGVjdCAmJiB0aGlzLmdhbWVTdGF0ZS5pbmRleFNlbGVjdC55ZWxsb3cpIHtcbiAgICAgIHRoaXMuZ2FtZVBsYXkuc2VsZWN0Q2VsbCh0aGlzLmdhbWVTdGF0ZS5pbmRleFNlbGVjdC55ZWxsb3cpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGRvQXR0YWNrQ29tcCgpIHtcbiAgICBjb25zdCBhY3RpdmVDb21wID0gZ2V0UmFuZG9tQ2hhcmFjdGVyKHRoaXMuZ2FtZVN0YXRlLmNvbXBUZWFtKTtcbiAgICB0aGlzLmdhbWVTdGF0ZS5hY3RpdmVDaGFyID0gYWN0aXZlQ29tcDtcbiAgICB0aGlzLnJlYWN0T25DbGljayhhY3RpdmVDb21wLCBbJ2RhZW1vbicsICd1bmRlYWQnLCAndmFtcGlyZSddKTtcblxuICAgIGNvbnN0IHVzZXJQb3NpdGlvbiA9IHRoaXMuZ2FtZVN0YXRlLmdldFVzZXJQb3NpdGlvbigpO1xuXG4gICAgaWYgKHVzZXJQb3NpdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCByZXNwb25zZURvRGFtYWdlID0gYXdhaXQgdGhpcy5kb0RhbWFnZSh1c2VyUG9zaXRpb24pO1xuICAgICAgaWYgKHJlc3BvbnNlRG9EYW1hZ2UpIHtcbiAgICAgICAgdGhpcy5jaGVja0FuZEVuZEdhbWVJZk5lY2Vzc2FyeSgpO1xuICAgICAgICB0aGlzLnVwZGF0ZVBpY3R1cmUoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5nYW1lU3RhdGUuYWN0aXZlQ2hhci5wb3NpdGlvbiA9IHRoaXMubW92ZVRvUmFuZG9tUG9zaXRpb24oKTtcbiAgICAgIHRoaXMuZ2FtZVBsYXkucmVkcmF3UG9zaXRpb25zKHRoaXMuZ2FtZVN0YXRlLmdldEFsbFBsYXllcigpKTtcbiAgICB9XG5cbiAgICB0aGlzLmdhbWVTdGF0ZS5hY3RpdmVDaGFyID0gbnVsbDtcbiAgICB0aGlzLnJlc2V0KCk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGNoZWNrQW5kRW5kR2FtZUlmTmVjZXNzYXJ5KCkge1xuICAgIGlmICh0aGlzLmdhbWVTdGF0ZS51c2VyVGVhbS5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuZ2FtZVN0YXRlLmJsb2NrID0gdHJ1ZTtcblxuICAgICAgdGhpcy5nYW1lUGxheS5zaG93TW9kYWxNZXNzYWdlKCdZb3UgbG9zZSEnLCAnMTI5MzM1Jyk7XG4gICAgfVxuICB9XG5cbiAgbW92ZVRvUmFuZG9tUG9zaXRpb24oKSB7XG4gICAgbGV0IHJhbmQ7XG4gICAgbGV0IGlzUGxheWVyO1xuICAgIGRvIHtcbiAgICAgIHJhbmQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLmdhbWVTdGF0ZS50cmFuc2l0aW9uQ2VsbHMubGVuZ3RoKTtcbiAgICAgIGNvbnN0IHBvdGVudGlhbFBvc2l0aW9uID0gdGhpcy5nYW1lU3RhdGUudHJhbnNpdGlvbkNlbGxzW3JhbmRdO1xuICAgICAgaXNQbGF5ZXIgPSB0aGlzLmdhbWVTdGF0ZVxuICAgICAgICAuZ2V0QWxsUGxheWVyKClcbiAgICAgICAgLnNvbWUoKG8pID0+IG8ucG9zaXRpb24gPT09IHBvdGVudGlhbFBvc2l0aW9uKTtcbiAgICB9IHdoaWxlIChpc1BsYXllcik7XG5cbiAgICByZXR1cm4gdGhpcy5nYW1lU3RhdGUudHJhbnNpdGlvbkNlbGxzW3JhbmRdO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTW9kYWxQb3B1cCIsImNvbnN0cnVjdG9yIiwib3B0aW9ucyIsInRoaXMiLCJlbGVtTW9kYWwiLCJldmVudFNob3dNb2RhbCIsImV2ZW50SGlkZU1vZGFsIiwiaGlkaW5nIiwiZGVzdHJveWVkIiwiYW5pbWF0aW9uU3BlZWQiLCJjcmVhdGVNb2RhbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJoYW5kbGVyQ2xvc2VNb2RhbCIsImJpbmQiLCJDdXN0b21FdmVudCIsImRldGFpbCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsIm1vZGFsSFRNTCIsIm1vZGFsRm9vdGVySFRNTCIsImNsYXNzTGlzdCIsImFkZCIsInJlcGxhY2UiLCJ0aXRsZSIsImNvbnRlbnQiLCJmb290ZXJCdXR0b25zIiwiYnV0dG9uIiwibW9kYWxGb290ZXJCdXR0b24iLCJjbGFzcyIsImhhbmRsZXIiLCJ0ZXh0IiwiaW5uZXJIVE1MIiwiYm9keSIsImFwcGVuZENoaWxkIiwic2hvdyIsImRpc3BhdGNoRXZlbnQiLCJoaWRlIiwicmVtb3ZlIiwic2V0VGltZW91dCIsImUiLCJ0YXJnZXQiLCJkYXRhc2V0IiwiZGlzbWlzcyIsImRlc3Ryb3kiLCJwYXJlbnRFbGVtZW50IiwicmVtb3ZlQ2hpbGQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0Q29udGVudCIsImh0bWwiLCJxdWVyeVNlbGVjdG9yIiwic2V0VGl0bGUiLCJjYWxjVGlsZVR5cGUiLCJpbmRleCIsImJvYXJkU2l6ZSIsImkiLCJyZXN0b3JlQ2hhcmFjdGVycyIsImNoYXJhY3RlcnMiLCJyZXN0b3JlRm4iLCJtYXAiLCJ1cEF0dGFja0RlZmVuY2UiLCJiZWZvcmUiLCJsaWZlIiwiTWF0aCIsImZsb29yIiwibWF4Iiwib3ZlcndyaXRlUHJvcGVydGllcyIsInNvdXJjZSIsIk9iamVjdCIsImFzc2lnbiIsInByYWlyaWUiLCJkZXNlcnQiLCJhcmN0aWMiLCJtb3VudGFpbiIsIkdhbWVTdGF0ZSIsImdhbWVQbGF5IiwibGV2ZWxHYW1lIiwiaXNNb3ZlIiwiY291bnRDbGljayIsInVzZXJUZWFtU3Vydml2b3JzIiwiaGlzdG9yeSIsInBvaW50cyIsImJsb2NrIiwidXNlclRlYW0iLCJjb21wVGVhbSIsImFjdGl2ZUNoYXIiLCJpbmRleFNlbGVjdCIsInRyYW5zaXRpb25DZWxscyIsImF0dGFja0NlbGxzIiwic2hvd01vZGFsIiwiZ2V0QWxsUGxheWVyIiwiRXJyb3IiLCJjYWxjdWxhdGVTdW1Qb2ludHMiLCJyZWR1Y2UiLCJhIiwiYiIsImNoYXJhY3RlciIsImhlYWx0aCIsImdldFVzZXJQb3NpdGlvbiIsImZvdW5kSXRlbSIsImZpbmQiLCJpdGVtIiwiaW5jbHVkZXMiLCJwb3NpdGlvbiIsInVuZGVmaW5lZCIsImZpbmRQcmVzdW1lZERlY2Vhc2VkUGxheWVyIiwiYWN0aXZlQ2hhclVzZXIiLCJnZXRQcmVzdW1lZERlY2Vhc2VkUGxheWVySW5mbyIsImZpbmRJbmRleCIsInRlYW1LZXkiLCJnZXRQbGF5ZXIiLCJlbCIsImdldFRyYW5zaXRpb25BdHRhY2tDZWxscyIsIm1heFJhbmdlIiwiYXR0YWNrIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiYXJyYXlDZWxscyIsInB1c2giLCJ0YWJsZUNlbGxzIiwiY2VsbHMiLCJyZXN1bHQiLCJzIiwic2xpY2UiLCJnZXRUYWJsZSIsImFsbG93ZWRDZWxscyIsInJvdyIsImoiLCJnZXRBdHRhY2tDZWxscyIsInRyYW5zaXRDZWxscyIsImdldFRyYW5zaXRpb25DZWxscyIsIlRlYW0iLCJDaGFyYWN0ZXIiLCJsZXZlbCIsInR5cGUiLCJuYW1lIiwiZGVmZW5jZSIsImxldmVsVXAiLCJtaW4iLCJQb3NpdGlvbmVkQ2hhcmFjdGVyIiwidmFsdWUiLCJfY2hhcmFjdGVyIiwiX3Bvc2l0aW9uIiwiQm93bWFuIiwic3VwZXIiLCJtYXhBdHRhY2siLCJTd29yZHNtYW4iLCJNYWdpY2lhbiIsIkRhZW1vbiIsIlVuZGVhZCIsIlZhbXBpcmUiLCJjaG9vc2VSYW5kUG9zaXRpb25zIiwiY2hvb3NlUmFuZFBvc2l0aW9uIiwicmFuZG9tIiwiY3JlYXRlUG9zaXRpb25zQ2hhciIsInBsYXllclR5cGVzIiwib3Bwb25lbnQiLCJfcmVmIiwibWF4TGV2ZWwiLCJjaGFyQ291bnQiLCJwb3NpdGlvbnMiLCJ0ZWFtIiwiYWxsb3dlZFR5cGVzIiwiY2hhcmFjdGVyQ291bnQiLCJwbGF5ZXJHZW5lcmF0b3IiLCJyYW5kb21MZXZlbCIsIlJhbmRvbUNsYXNzIiwiY2hhcmFjdGVyR2VuZXJhdG9yIiwibmV4dCIsImdlbmVyYXRlVGVhbSIsInJhbmRQb3NpdGlvbnMiLCJmb3JFYWNoIiwiY2hhciIsInJhbmRQb3NpdGlvbiIsImlzUG9zaXRpb25VbmlxdWUiLCJyZXN0b3JlQ2hhciIsIm9iaiIsImJvd21hbiIsInN3b3Jkc21hbiIsIm1hZ2ljaWFuIiwiZGFlbW9uIiwidW5kZWFkIiwidmFtcGlyZSIsInJlc3RvcmVQb3NpdGlvbmVkQ2hhciIsImNvbnRhaW5lciIsImJvYXJkRWwiLCJjZWxsQ2xpY2tMaXN0ZW5lcnMiLCJjZWxsRW50ZXJMaXN0ZW5lcnMiLCJjZWxsTGVhdmVMaXN0ZW5lcnMiLCJuZXdHYW1lTGlzdGVuZXJzIiwic2F2ZUdhbWVMaXN0ZW5lcnMiLCJsb2FkR2FtZUxpc3RlbmVycyIsImlzTW9kYWwiLCJpbml0TW9kYWxMaXN0ZW5lciIsImJpbmRUb0RPTSIsIkhUTUxFbGVtZW50IiwiY3VycmVudE1vZGFsIiwiZHJhd1VpIiwidGhlbWUiLCJjaGVja0JpbmRpbmciLCJuZXdHYW1lRWwiLCJzYXZlR2FtZUVsIiwibG9hZEdhbWVFbCIsImV2ZW50Iiwib25OZXdHYW1lQ2xpY2siLCJvblNhdmVHYW1lQ2xpY2siLCJvbkxvYWRHYW1lQ2xpY2siLCJjZWxsRWwiLCJvbkNlbGxFbnRlciIsIm9uQ2VsbExlYXZlIiwib25DZWxsQ2xpY2siLCJBcnJheSIsImZyb20iLCJjaGlsZHJlbiIsInJlZHJhd1Bvc2l0aW9ucyIsImNlbGwiLCJjaGFyRWwiLCJoZWFsdGhFbCIsImhlYWx0aEluZGljYXRvckVsIiwic3R5bGUiLCJ3aWR0aCIsIm1lc3NhZ2UiLCJ1bmljb2RlIiwibW9kYWwiLCJhZGRDZWxsRW50ZXJMaXN0ZW5lciIsImNhbGxiYWNrIiwiYWRkQ2VsbExlYXZlTGlzdGVuZXIiLCJhZGRDZWxsQ2xpY2tMaXN0ZW5lciIsImFkZE5ld0dhbWVMaXN0ZW5lciIsImFkZFNhdmVHYW1lTGlzdGVuZXIiLCJhZGRMb2FkR2FtZUxpc3RlbmVyIiwiaW5kZXhPZiIsImN1cnJlbnRUYXJnZXQiLCJvIiwiY2FsbCIsInNob3dNb2RhbE1lc3NhZ2UiLCJzZWxlY3RDZWxsIiwiY29sb3IiLCJkZXNlbGVjdENlbGwiLCJmaWx0ZXIiLCJzdGFydHNXaXRoIiwic2hvd0NlbGxUb29sdGlwIiwiaGlkZUNlbGxUb29sdGlwIiwic2hvd0RhbWFnZSIsImRhbWFnZSIsIlByb21pc2UiLCJyZXNvbHZlIiwiZGFtYWdlRWwiLCJjbGFzc05hbWUiLCJ0ZXh0Q29udGVudCIsInNldEN1cnNvciIsImN1cnNvciIsInN0YXRlU2VydmljZSIsInN0b3JhZ2UiLCJzYXZlIiwic3RhdGUiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsImxvYWQiLCJwYXJzZSIsImdldEl0ZW0iLCJsb2NhbFN0b3JhZ2UiLCJnYW1lQ3RybCIsImdhbWVTdGF0ZSIsIm5ld0dhbWUiLCJzYXZlR2FtZSIsImxvYWRHYW1lIiwiZXZlbnRzIiwiaW5pdCIsImluaXROZXdUZWFtcyIsInVwZGF0ZVBpY3R1cmUiLCJkYXRhIiwicmVzZXQiLCJzYXZlZEdhbWVTdGF0ZSIsInJlc3RvcmVHYW1lU3RhdGUiLCJyZXN0b3JlQWN0aXZlQ2hhcmFjdGVyIiwic2hvd0dhbWVJbmZvIiwiaGFuZGxlTG9hZGluZ0Vycm9yIiwic2F2ZWRTdGF0ZSIsInJlc2V0VGVhbXMiLCJzYXZlZEFjdGl2ZUNoYXIiLCJyZXN0YXJ0ZWRBY3RpdmVDaGFyIiwicmVhY3RPbkNsaWNrIiwiZ2V0VXNlclRlYW0iLCJnZXRDb21wVGVhbSIsIl9yZWYyIiwidGhlbWVWYWx1ZXMiLCJ2YWx1ZXMiLCJ0aGVtZXMiLCJ1cGRhdGVUZWFtcyIsInBsYXllciIsIm5ld1VzZXJUZWFtIiwiYWxsU3RhcnRQb3NpdGlvbnMiLCJzcGxpY2UiLCJzdXJ2aXZvciIsIm5ld1Bvc2l0aW9uIiwiY29uY2F0IiwiaWNvbkNvZGUiLCJoYW5kbGVVc2VyVHVybiIsImhhbmRsZUNvbXB1dGVyVHVybiIsImdyZWVuIiwicmVkIiwiZG9EYW1hZ2UiLCJjaGVja0dhbWVQcm9ncmVzcyIsImRvQXR0YWNrQ29tcCIsImdldEluZm8iLCJpc1RyYW5zaXRpb25DZWxsIiwiaXNBdHRhY2tDZWxsIiwiaXNVc2VyQ2VsbCIsInNvbWUiLCJpc0NvbXBDZWxsIiwiY3Vyc29ycyIsImhhc1NlbGVjdGVkR3JlZW4iLCJpc0NvbXBUZWFtUG9zaXRpb24iLCJhcnJheVR5cGVzIiwidXBkYXRlU2VsZWN0ZWRDZWxsIiwiaGFuZGxlSW52YWxpZFNlbGVjdGlvbiIsIm51bSIsInllbGxvdyIsImlzU2VsZWN0ZWQiLCJpc05vdEluQXR0YWNrQ2VsbHMiLCJpc0NvbXB1dGVyVGVhbVBvc2l0aW9uIiwicm91bmQiLCJjYWxjdWxhdGVEYW1hZ2UiLCJjaGVja0hlYWx0aFJlbW92ZURlYWQiLCJpbmZvIiwia2V5cyIsImFjdGl2ZUNvbXAiLCJ1c2VyUG9zaXRpb24iLCJjaGVja0FuZEVuZEdhbWVJZk5lY2Vzc2FyeSIsIm1vdmVUb1JhbmRvbVBvc2l0aW9uIiwicmFuZCIsImlzUGxheWVyIiwicG90ZW50aWFsUG9zaXRpb24iXSwic291cmNlUm9vdCI6IiJ9